<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kyest.cl ‚Äî BI Dashboard</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/dark.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<style>
:root {
  --bg: #070B14;
  --surface: #0F1629;
  --surface2: #162035;
  --border: #1E2D4A;
  --border2: #243452;
  --accent: #3B82F6;
  --accent-dim: rgba(59,130,246,0.12);
  --green: #10B981;
  --green-dim: rgba(16,185,129,0.12);
  --red: #EF4444;
  --red-dim: rgba(239,68,68,0.12);
  --yellow: #F59E0B;
  --purple: #8B5CF6;
  --orange: #F97316;
  --text-primary: #F1F5F9;
  --text-secondary: #94A3B8;
  --text-muted: #475569;
  --sidebar-width: 220px;
}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text-primary);overflow-x:hidden;min-height:100vh}
/* ===== SIDEBAR ===== */
.sidebar{position:fixed;left:0;top:0;width:var(--sidebar-width);height:100vh;background:var(--surface);border-right:1px solid var(--border);display:flex;flex-direction:column;z-index:100;overflow-y:auto}
.sidebar-logo{padding:20px 20px 16px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:10px}
.sidebar-logo .logo-icon{width:32px;height:32px;background:var(--accent);border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:16px;font-weight:700;color:#fff;flex-shrink:0}
.sidebar-logo .logo-text{font-size:15px;font-weight:700;color:var(--text-primary)}
.sidebar-logo .logo-sub{font-size:11px;color:var(--text-muted);margin-top:1px}
.nav-section{padding:16px 10px 4px;font-size:10px;font-weight:600;text-transform:uppercase;letter-spacing:0.08em;color:var(--text-muted)}
.nav-item{display:flex;align-items:center;gap:10px;padding:9px 14px;border-radius:8px;cursor:pointer;transition:all 0.15s;font-size:13.5px;color:var(--text-secondary);margin:1px 4px;border-left:3px solid transparent}
.nav-item:hover{background:var(--surface2);color:var(--text-primary)}
.nav-item.active{background:var(--accent-dim);color:var(--accent);border-left-color:var(--accent)}
.nav-item .nav-icon{font-size:16px;width:20px;text-align:center}
.sidebar-bottom{margin-top:auto;padding:16px;border-top:1px solid var(--border)}
.sidebar-bottom .version{font-size:11px;color:var(--text-muted)}
/* ===== MAIN ===== */
.main{margin-left:var(--sidebar-width);min-height:100vh;display:flex;flex-direction:column}
/* ===== TOPBAR ===== */
.topbar{position:sticky;top:0;z-index:50;background:rgba(7,11,20,0.95);backdrop-filter:blur(10px);border-bottom:1px solid var(--border);padding:0 28px;height:60px;display:flex;align-items:center;gap:16px}
.topbar-left{display:flex;align-items:center;gap:12px;flex:1}
.breadcrumb{font-size:13px;color:var(--text-muted)}
.breadcrumb span{color:var(--text-primary);font-weight:500}
.live-badge{display:flex;align-items:center;gap:6px;background:var(--green-dim);border:1px solid rgba(16,185,129,0.3);border-radius:20px;padding:4px 10px;font-size:11px;color:var(--green);font-weight:500}
.live-dot{width:6px;height:6px;border-radius:50%;background:var(--green);animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.4}}
.last-update{font-size:11px;color:var(--text-muted)}
.topbar-right{display:flex;align-items:center;gap:8px}
.preset-pills{display:flex;gap:4px}
.pill{padding:5px 12px;border-radius:20px;font-size:12px;font-weight:500;cursor:pointer;border:1px solid var(--border);color:var(--text-secondary);background:transparent;transition:all 0.15s;white-space:nowrap}
.pill:hover{border-color:var(--accent);color:var(--accent)}
.pill.active{background:var(--accent);border-color:var(--accent);color:#fff}
.date-picker-wrap{position:relative}
#dateRangePicker{background:var(--surface);border:1px solid var(--border);color:var(--text-primary);border-radius:8px;padding:6px 12px;font-size:12px;font-family:'Inter',sans-serif;cursor:pointer;width:200px;outline:none}
#dateRangePicker:focus{border-color:var(--accent)}
.btn-refresh{padding:6px 14px;border-radius:8px;border:1px solid var(--border);background:var(--surface);color:var(--text-secondary);font-size:12px;cursor:pointer;font-family:'Inter',sans-serif;transition:all 0.15s;display:flex;align-items:center;gap:6px}
.btn-refresh:hover{border-color:var(--accent);color:var(--accent)}
/* ===== PAGE CONTENT ===== */
.page-content{padding:24px 28px;flex:1}
.page{display:none}
.page.active{display:block}
/* ===== KPI CARDS ===== */
.kpi-row{display:grid;gap:16px;margin-bottom:20px}
.kpi-6{grid-template-columns:repeat(6,1fr)}
.kpi-card{background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:18px 20px;overflow:hidden;position:relative;transition:border-color 0.15s}
.kpi-card:hover{border-color:var(--border2)}
.kpi-label{font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;color:var(--text-muted);margin-bottom:8px}
.kpi-value{font-size:24px;font-weight:700;color:var(--text-primary);line-height:1;margin-bottom:4px}
.kpi-sub{font-size:12px;color:var(--text-secondary)}
.kpi-icon{position:absolute;top:14px;right:16px;font-size:20px;opacity:0.4}
.kpi-strip{display:grid;gap:12px;margin-bottom:20px}
.kpi-6s{grid-template-columns:repeat(6,1fr)}
.kpi-strip-card{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:14px 16px}
.kpi-strip-card .kpi-label{font-size:10px;margin-bottom:6px}
.kpi-strip-card .kpi-value{font-size:20px}
/* ===== CHARTS ===== */
.chart-row{display:grid;gap:16px;margin-bottom:20px}
.chart-row-2-1{grid-template-columns:60% 1fr}
.chart-row-2{grid-template-columns:1fr 1fr}
.card{background:var(--surface);border:1px solid var(--border);border-radius:12px;overflow:hidden}
.card-header{padding:16px 20px 12px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.card-title{font-size:13px;font-weight:600;color:var(--text-primary)}
.card-subtitle{font-size:11px;color:var(--text-muted);margin-top:2px}
.card-body{padding:20px}
.chart-wrap{height:280px;position:relative}
/* ===== TABLES ===== */
.table-wrap{overflow-x:auto}
.data-table{width:100%;border-collapse:collapse}
.data-table th{padding:10px 14px;text-align:left;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:0.05em;color:var(--text-muted);border-bottom:1px solid var(--border);white-space:nowrap}
.data-table td{padding:10px 14px;font-size:13px;border-bottom:1px solid rgba(30,45,74,0.5);color:var(--text-secondary)}
.data-table tr:hover td{background:rgba(59,130,246,0.04)}
.data-table td:first-child{color:var(--text-primary);font-weight:500}
/* ===== BADGES ===== */
.badge{display:inline-flex;align-items:center;padding:3px 10px;border-radius:20px;font-size:11px;font-weight:600;white-space:nowrap}
.badge-blue{background:rgba(59,130,246,0.15);color:#3B82F6}
.badge-purple{background:rgba(139,92,246,0.15);color:#8B5CF6}
.badge-orange{background:rgba(249,115,22,0.15);color:#F97316}
.badge-green{background:var(--green-dim);color:var(--green)}
.badge-gray{background:rgba(71,85,105,0.3);color:#94A3B8}
.badge-red{background:var(--red-dim);color:var(--red)}
.badge-yellow{background:rgba(245,158,11,0.15);color:#F59E0B}
/* ===== PROGRESS BAR ===== */
.progress-wrap{width:100%;height:4px;background:var(--border);border-radius:2px;overflow:hidden;margin-top:4px}
.progress-bar{height:100%;background:var(--accent);border-radius:2px;transition:width 0.3s}
/* ===== INSIGHTS BOX ===== */
.insights-box{background:linear-gradient(135deg,rgba(59,130,246,0.08),rgba(139,92,246,0.05));border:1px solid rgba(59,130,246,0.2);border-radius:12px;padding:20px 24px;margin-top:20px}
.insights-title{font-size:13px;font-weight:600;color:var(--accent);margin-bottom:12px;display:flex;align-items:center;gap:8px}
.insights-list{list-style:none;display:flex;flex-direction:column;gap:8px}
.insights-list li{font-size:13px;color:var(--text-secondary);padding-left:16px;position:relative;line-height:1.5}
.insights-list li::before{content:"‚Üí";position:absolute;left:0;color:var(--accent)}
/* ===== ALERT CARD ===== */
.alert-card{background:linear-gradient(135deg,rgba(239,68,68,0.08),rgba(245,158,11,0.05));border:1px solid rgba(239,68,68,0.25);border-radius:12px;padding:20px 24px;margin-bottom:20px}
.alert-title{font-size:14px;font-weight:600;color:var(--red);margin-bottom:12px;display:flex;align-items:center;gap:8px}
.alert-body{font-size:13px;color:var(--text-secondary);line-height:1.6}
.roas-compare{display:flex;gap:20px;margin-top:14px}
.roas-box{flex:1;background:var(--surface);border-radius:8px;padding:14px;text-align:center;border:1px solid var(--border)}
.roas-box .roas-label{font-size:11px;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.05em;margin-bottom:6px}
.roas-box .roas-val{font-size:28px;font-weight:700}
.roas-box.bad .roas-val{color:var(--red)}
.roas-box.good .roas-val{color:var(--green)}
/* ===== ADS GRID ===== */
.ads-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:14px}
.ad-card{background:var(--surface2);border:1px solid var(--border);border-radius:10px;overflow:hidden;transition:border-color 0.15s}
.ad-card:hover{border-color:var(--border2)}
.ad-thumb{width:100%;height:120px;object-fit:cover;background:#162035;display:block}
.ad-thumb-placeholder{width:100%;height:120px;background:linear-gradient(135deg,#162035,#1E2D4A);display:flex;align-items:center;justify-content:center;font-size:30px}
.ad-body{padding:10px 12px}
.ad-name{font-size:12px;font-weight:500;color:var(--text-primary);margin-bottom:8px;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.ad-metrics{display:grid;grid-template-columns:1fr 1fr;gap:4px}
.ad-metric{font-size:11px;color:var(--text-muted)}
.ad-metric span{color:var(--text-secondary);font-weight:500}
.ad-footer{padding:8px 12px;border-top:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
/* ===== GA4 HIGHLIGHTS ===== */
.highlight-best{background:rgba(16,185,129,0.08);color:var(--green);font-weight:600}
/* ===== CONFIG PAGE ===== */
.coming-soon{display:flex;flex-direction:column;align-items:center;justify-content:center;height:400px;gap:16px;color:var(--text-muted)}
.coming-soon .cs-icon{font-size:64px;opacity:0.3}
.coming-soon h2{font-size:22px;font-weight:600;color:var(--text-secondary)}
/* ===== MOBILE HAMBURGER ===== */
.hamburger{display:none;background:none;border:none;color:var(--text-primary);font-size:22px;cursor:pointer;padding:4px}
.sidebar-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.7);z-index:90}
@media(max-width:768px){
  .sidebar{transform:translateX(-100%);transition:transform 0.3s}
  .sidebar.mobile-open{transform:translateX(0)}
  .sidebar-overlay.visible{display:block}
  .main{margin-left:0}
  .hamburger{display:block}
  .kpi-6,.kpi-6s{grid-template-columns:repeat(2,1fr)}
  .chart-row-2-1,.chart-row-2{grid-template-columns:1fr}
  .topbar{padding:0 16px}
  .page-content{padding:16px}
  .preset-pills{display:none}
  .last-update{display:none}
  .ads-grid{grid-template-columns:1fr 1fr}
}
/* ===== SORT INDICATOR ===== */
th[data-sort]{cursor:pointer;user-select:none}
th[data-sort]:hover{color:var(--text-primary)}
th[data-sort].asc::after{content:" ‚Üë"}
th[data-sort].desc::after{content:" ‚Üì"}
/* ===== SCROLLBAR ===== */
::-webkit-scrollbar{width:6px;height:6px}
::-webkit-scrollbar-track{background:var(--bg)}
::-webkit-scrollbar-thumb{background:var(--border2);border-radius:3px}
::-webkit-scrollbar-thumb:hover{background:#2d4170}
</style>
</head>
<body>

<!-- Sidebar -->
<aside class="sidebar" id="sidebar">
  <div class="sidebar-logo">
    <div class="logo-icon">K</div>
    <div>
      <div class="logo-text">Kyest.cl</div>
      <div class="logo-sub">BI Dashboard</div>
    </div>
  </div>
  <div class="nav-section">Principal</div>
  <div class="nav-item active" data-page="overview">
    <span class="nav-icon">üè†</span> Overview
  </div>
  <div class="nav-section">Canales</div>
  <div class="nav-item" data-page="metaads">
    <span class="nav-icon">üì£</span> Meta Ads
  </div>
  <div class="nav-item" data-page="shopify">
    <span class="nav-icon">üõí</span> Shopify
  </div>
  <div class="nav-item" data-page="ga4">
    <span class="nav-icon">üìä</span> Audiencias
  </div>
  <div class="nav-section">Sistema</div>
  <div class="nav-item" data-page="config">
    <span class="nav-icon">‚öôÔ∏è</span> Configuraci√≥n
  </div>
  <div class="sidebar-bottom">
    <div class="version">v4.0 ¬∑ Feb 2026</div>
  </div>
</aside>

<div class="sidebar-overlay" id="sidebarOverlay"></div>

<!-- Main -->
<div class="main">
  <!-- Topbar -->
  <header class="topbar">
    <div class="topbar-left">
      <button class="hamburger" id="hamburgerBtn">‚ò∞</button>
      <div class="breadcrumb">Kyest.cl / <span id="breadcrumbText">Overview</span></div>
      <div class="live-badge"><div class="live-dot"></div> En vivo</div>
      <div class="last-update">√öltima actualizaci√≥n: 23 Feb 2026, 11:00</div>
    </div>
    <div class="topbar-right">
      <div class="preset-pills">
        <button class="pill" data-preset="7d">7D</button>
        <button class="pill active" data-preset="30d">30D</button>
        <button class="pill" data-preset="90d">90D</button>
        <button class="pill" data-preset="all">Todo</button>
        <button class="pill" data-preset="custom">üìÖ Custom</button>
      </div>
      <div class="date-picker-wrap">
        <input type="text" id="dateRangePicker" placeholder="Seleccionar rango..." readonly>
      </div>
      <button class="btn-refresh" onclick="refreshDashboard()">‚Üª Actualizar</button>
    </div>
  </header>

  <div class="page-content">

    <!-- ===== OVERVIEW PAGE ===== -->
    <div class="page active" id="page-overview">
      <!-- KPI Row -->
      <div class="kpi-row kpi-6">
        <div class="kpi-card">
          <div class="kpi-icon">üí∞</div>
          <div class="kpi-label">Revenue Total</div>
          <div class="kpi-value" id="ov-revenue">‚Äî</div>
          <div class="kpi-sub" id="ov-revenue-sub">CLP</div>
        </div>
        <div class="kpi-card">
          <div class="kpi-icon">üì¶</div>
          <div class="kpi-label">√ìrdenes</div>
          <div class="kpi-value" id="ov-orders">‚Äî</div>
          <div class="kpi-sub" id="ov-orders-sub">en el per√≠odo</div>
        </div>
        <div class="kpi-card">
          <div class="kpi-icon">üí≥</div>
          <div class="kpi-label">AOV</div>
          <div class="kpi-value" id="ov-aov">‚Äî</div>
          <div class="kpi-sub">Ticket promedio</div>
        </div>
        <div class="kpi-card">
          <div class="kpi-icon">üì£</div>
          <div class="kpi-label">Gasto Meta</div>
          <div class="kpi-value" id="ov-spend">‚Äî</div>
          <div class="kpi-sub">Meta Ads</div>
        </div>
        <div class="kpi-card">
          <div class="kpi-icon">üìà</div>
          <div class="kpi-label">ROAS Real</div>
          <div class="kpi-value" id="ov-roas" style="color:var(--green)">‚Äî</div>
          <div class="kpi-sub">Shopify / Meta Spend</div>
        </div>
        <div class="kpi-card">
          <div class="kpi-icon">üë•</div>
          <div class="kpi-label">Nuevos Clientes</div>
          <div class="kpi-value" id="ov-newcust">‚Äî</div>
          <div class="kpi-sub" id="ov-newcust-sub">primeras compras</div>
        </div>
      </div>

      <!-- Charts Row 1 -->
      <div class="chart-row chart-row-2-1">
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">üìà Revenue Diario</div>
              <div class="card-subtitle">Ingresos por d√≠a en el per√≠odo seleccionado</div>
            </div>
          </div>
          <div class="card-body">
            <div class="chart-wrap"><canvas id="chartDailyRevenue"></canvas></div>
          </div>
        </div>
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">üåê Canales de Tr√°fico</div>
              <div class="card-subtitle">Sesiones GA4 por canal</div>
            </div>
          </div>
          <div class="card-body">
            <div class="chart-wrap"><canvas id="chartChannels"></canvas></div>
          </div>
        </div>
      </div>

      <!-- Charts Row 2 -->
      <div class="chart-row chart-row-2">
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">üìä Revenue vs Gasto Meta</div>
              <div class="card-subtitle">Comparaci√≥n diaria (eje dual)</div>
            </div>
          </div>
          <div class="card-body">
            <div class="chart-wrap"><canvas id="chartRevenueVsSpend"></canvas></div>
          </div>
        </div>
        <div class="card">
          <div class="card-header">
            <div>
              <div class="card-title">üë• Nuevos vs Recurrentes</div>
              <div class="card-subtitle">Composici√≥n de clientes por mes</div>
            </div>
          </div>
          <div class="card-body">
            <div class="chart-wrap"><canvas id="chartNewVsReturning"></canvas></div>
          </div>
        </div>
      </div>

      <!-- Insights -->
      <div class="insights-box">
        <div class="insights-title">üí° Insights Clave ‚Äî Overview</div>
        <ul class="insights-list">
          <li id="insight-ov-1">El ROAS real (Shopify/Meta Spend) es muy superior al ROAS pixel de Meta ‚Üí urgente corregir tracking</li>
          <li id="insight-ov-2">Direct genera el 74% del revenue de GA4 con solo 15% del tr√°fico ‚Üí potenciar retargeting a clientes actuales</li>
          <li id="insight-ov-3">Paid Social tiene 2.875 sesiones pero solo 1 conversi√≥n ‚Üí pixel de Meta desconfigurado</li>
          <li id="insight-ov-4">AOV promedio de $135.058 CLP sugiere tickets altos, potencial para upsell de paquetes</li>
        </ul>
      </div>
    </div>

    <!-- ===== META ADS PAGE ===== -->
    <div class="page" id="page-metaads">
      <!-- KPI Strip -->
      <div class="kpi-strip kpi-6s" id="meta-kpi-strip">
        <div class="kpi-strip-card">
          <div class="kpi-label">üí∏ Gasto Total</div>
          <div class="kpi-value" id="meta-spend">‚Äî</div>
        </div>
        <div class="kpi-strip-card">
          <div class="kpi-label">üëÅ Impresiones</div>
          <div class="kpi-value" id="meta-impressions">‚Äî</div>
        </div>
        <div class="kpi-strip-card">
          <div class="kpi-label">üñ± Clicks</div>
          <div class="kpi-value" id="meta-clicks">‚Äî</div>
        </div>
        <div class="kpi-strip-card">
          <div class="kpi-label">üìä CTR Promedio</div>
          <div class="kpi-value" id="meta-ctr">‚Äî</div>
        </div>
        <div class="kpi-strip-card">
          <div class="kpi-label">üí≤ CPC Promedio</div>
          <div class="kpi-value" id="meta-cpc">‚Äî</div>
        </div>
        <div class="kpi-strip-card">
          <div class="kpi-label">üìà ROAS Pixel</div>
          <div class="kpi-value" id="meta-roas-pixel" style="color:var(--red)">‚Äî</div>
        </div>
      </div>

      <!-- Pixel Alert -->
      <div class="alert-card">
        <div class="alert-title">‚ö†Ô∏è Alerta: Discrepancia de Tracking ‚Äî Pixel Meta vs Shopify Real</div>
        <div class="alert-body">
          Meta Ads reporta un ROAS muy bajo porque el pixel no est√° registrando correctamente las conversiones en Shopify. 
          Los datos reales de Shopify muestran un ROAS muy superior, lo que indica que las ventas s√≠ se est√°n generando pero no se atribuyen correctamente a Meta Ads.
          <strong style="color:var(--red)"> Acci√≥n urgente: verificar e instalar pixel de Meta correctamente en Shopify checkout.</strong>
        </div>
        <div class="roas-compare">
          <div class="roas-box bad">
            <div class="roas-label">ROAS Meta Pixel</div>
            <div class="roas-val" id="meta-roas-compare">0.92x</div>
            <div style="font-size:11px;color:var(--text-muted);margin-top:4px">Reportado por Meta Ads</div>
          </div>
          <div class="roas-box good">
            <div class="roas-label">ROAS Real (Shopify)</div>
            <div class="roas-val" id="real-roas-compare">19.7x</div>
            <div style="font-size:11px;color:var(--text-muted);margin-top:4px">Revenue Shopify / Gasto Meta</div>
          </div>
        </div>
      </div>

      <!-- Campaigns Table -->
      <div class="card" style="margin-bottom:20px">
        <div class="card-header">
          <div>
            <div class="card-title">üìã Campa√±as Meta Ads</div>
            <div class="card-subtitle">Rendimiento por campa√±a ‚Äî click en columnas para ordenar</div>
          </div>
        </div>
        <div class="table-wrap">
          <table class="data-table" id="campaignsTable">
            <thead>
              <tr>
                <th>Campa√±a</th>
                <th>Objetivo</th>
                <th data-sort="spend" class="desc">Spend ‚Üì</th>
                <th data-sort="impressions">Impresiones</th>
                <th data-sort="clicks">Clicks</th>
                <th data-sort="ctr">CTR</th>
                <th data-sort="cpc">CPC</th>
                <th>ROAS Pixel</th>
                <th>Estado</th>
              </tr>
            </thead>
            <tbody id="campaignsBody"></tbody>
          </table>
        </div>
      </div>

      <!-- Daily Spend Chart -->
      <div class="chart-row chart-row-2">
        <div class="card">
          <div class="card-header">
            <div class="card-title">üìâ Gasto Diario Meta Ads</div>
          </div>
          <div class="card-body">
            <div class="chart-wrap"><canvas id="chartMetaDaily"></canvas></div>
          </div>
        </div>
        <div class="card">
          <div class="card-header">
            <div class="card-title">üèÜ CTR por Campa√±a (Top 10)</div>
          </div>
          <div class="card-body">
            <div class="chart-wrap"><canvas id="chartCampaignCTR"></canvas></div>
          </div>
        </div>
      </div>

      <!-- Top Ads Grid -->
      <div class="card" style="margin-bottom:20px">
        <div class="card-header">
          <div>
            <div class="card-title">üéØ Top Anuncios por CTR</div>
            <div class="card-subtitle">Mejores anuncios activos</div>
          </div>
        </div>
        <div class="card-body">
          <div class="ads-grid" id="adsGrid"></div>
        </div>
      </div>

      <div class="insights-box">
        <div class="insights-title">üí° Insights Clave ‚Äî Meta Ads</div>
        <ul class="insights-list">
          <li>El ROAS pixel (0.92x) vs ROAS real (19.7x) confirma que el pixel est√° roto ‚Üí instalar Meta Pixel en Shopify con Purchase event correcto</li>
          <li>Las campa√±as OUTCOME_SALES con mayor CTR (>2%) son las m√°s rentables ‚Üí aumentar presupuesto en estas</li>
          <li>M√∫ltiples campa√±as PAUSED con gasto $0 ‚Üí revisar y reactivar las que tuvieron buenos resultados</li>
          <li>CPC promedio de $132 CLP es eficiente dado el AOV de $135.058 CLP ‚Äî ROAS potencial muy alto</li>
        </ul>
      </div>
    </div>

    <!-- ===== SHOPIFY PAGE ===== -->
    <div class="page" id="page-shopify">
      <!-- KPI Strip -->
      <div class="kpi-strip kpi-6s">
        <div class="kpi-strip-card">
          <div class="kpi-label">üí∞ Revenue Total</div>
          <div class="kpi-value" id="sh-revenue">‚Äî</div>
        </div>
        <div class="kpi-strip-card">
          <div class="kpi-label">üì¶ √ìrdenes</div>
          <div class="kpi-value" id="sh-orders">‚Äî</div>
        </div>
        <div class="kpi-strip-card">
          <div class="kpi-label">üí≥ AOV</div>
          <div class="kpi-value" id="sh-aov">‚Äî</div>
        </div>
        <div class="kpi-strip-card">
          <div class="kpi-label">üèÜ Ticket M√°x</div>
          <div class="kpi-value" id="sh-max">‚Äî</div>
        </div>
        <div class="kpi-strip-card">
          <div class="kpi-label">üë§ Nuevos</div>
          <div class="kpi-value" id="sh-new">‚Äî</div>
        </div>
        <div class="kpi-strip-card">
          <div class="kpi-label">üîÑ % Recurrentes</div>
          <div class="kpi-value" id="sh-returning">‚Äî</div>
        </div>
      </div>

      <!-- Charts -->
      <div class="chart-row chart-row-2">
        <div class="card">
          <div class="card-header">
            <div class="card-title">üìä Revenue Mensual</div>
          </div>
          <div class="card-body">
            <div class="chart-wrap"><canvas id="chartMonthlyRevenue"></canvas></div>
          </div>
        </div>
        <div class="card">
          <div class="card-header">
            <div class="card-title">üë• Nuevos vs Recurrentes por Mes</div>
          </div>
          <div class="card-body">
            <div class="chart-wrap"><canvas id="chartShopifyCustomers"></canvas></div>
          </div>
        </div>
      </div>

      <!-- Top Products -->
      <div class="card" style="margin-bottom:20px">
        <div class="card-header">
          <div>
            <div class="card-title">üõçÔ∏è Top Productos por Revenue</div>
            <div class="card-subtitle">Top 10 ‚Äî per√≠odo completo</div>
          </div>
        </div>
        <div class="table-wrap">
          <table class="data-table">
            <thead>
              <tr>
                <th>#</th>
                <th>Producto</th>
                <th>Revenue</th>
                <th>Unidades</th>
                <th>% del Total</th>
                <th style="width:140px">Participaci√≥n</th>
              </tr>
            </thead>
            <tbody id="productsBody"></tbody>
          </table>
        </div>
      </div>

      <!-- Recent Orders -->
      <div class="card" style="margin-bottom:20px">
        <div class="card-header">
          <div>
            <div class="card-title">üßæ √ìrdenes Recientes</div>
            <div class="card-subtitle">√öltimas 20 √≥rdenes</div>
          </div>
        </div>
        <div class="table-wrap">
          <table class="data-table">
            <thead>
              <tr>
                <th>Fecha</th>
                <th>Order #</th>
                <th>Cliente</th>
                <th>Monto</th>
                <th>Estado</th>
                <th>Tipo</th>
              </tr>
            </thead>
            <tbody id="ordersBody"></tbody>
          </table>
        </div>
      </div>

      <div class="insights-box">
        <div class="insights-title">üí° Insights Clave ‚Äî Shopify</div>
        <ul class="insights-list">
          <li>250 √≥rdenes en 46 d√≠as = ~5.4 √≥rdenes/d√≠a con AOV de $135.058 CLP ‚Üí base s√≥lida</li>
          <li>Sculpt Freeze es el producto anchor con tickets de $800K-$2M CLP ‚Üí premium segment fuerte</li>
          <li>100% clientes nuevos seg√∫n API ‚Üí datos de recurrencia incompletos, revisar customer tracking</li>
          <li>Enero tuvo $18M vs Febrero $15.7M (hasta d√≠a 23) ‚Üí proyecci√≥n Feb ‚âà $20M CLP al mes completo</li>
        </ul>
      </div>
    </div>

    <!-- ===== GA4 PAGE ===== -->
    <div class="page" id="page-ga4">
      <!-- Channel Table -->
      <div class="card" style="margin-bottom:20px">
        <div class="card-header">
          <div>
            <div class="card-title">üìä Rendimiento por Canal ‚Äî GA4</div>
            <div class="card-subtitle">Ene‚ÄìFeb 2026 ¬∑ M√©tricas de adquisici√≥n y conversi√≥n</div>
          </div>
        </div>
        <div class="table-wrap">
          <table class="data-table" id="ga4Table">
            <thead>
              <tr>
                <th>Canal</th>
                <th>Sesiones</th>
                <th>Usuarios</th>
                <th>Nuevos Usuarios</th>
                <th>Conversiones</th>
                <th>Revenue</th>
                <th>Tasa Conv.</th>
                <th>% Tr√°fico</th>
              </tr>
            </thead>
            <tbody id="ga4Body"></tbody>
          </table>
        </div>
      </div>

      <!-- Highlight Cards + Chart -->
      <div class="chart-row chart-row-2">
        <div class="card">
          <div class="card-header">
            <div class="card-title">üéØ Sesiones por Canal</div>
          </div>
          <div class="card-body">
            <div class="chart-wrap"><canvas id="chartGA4Sessions"></canvas></div>
          </div>
        </div>
        <div class="card">
          <div class="card-header">
            <div class="card-title">üí∞ Revenue por Canal</div>
          </div>
          <div class="card-body">
            <div class="chart-wrap"><canvas id="chartGA4Revenue"></canvas></div>
          </div>
        </div>
      </div>

      <!-- Key Metric Cards -->
      <div class="kpi-row" style="grid-template-columns:repeat(4,1fr);margin-top:0">
        <div class="kpi-card" style="border-color:rgba(16,185,129,0.3)">
          <div class="kpi-label">üèÜ Canal + Rentable</div>
          <div class="kpi-value" style="font-size:18px;color:var(--green)">Direct</div>
          <div class="kpi-sub">$3.892.750 CLP revenue</div>
        </div>
        <div class="kpi-card" style="border-color:rgba(59,130,246,0.3)">
          <div class="kpi-label">üéØ Mejor Conv. Rate</div>
          <div class="kpi-value" style="font-size:18px;color:var(--accent)">Direct</div>
          <div class="kpi-sub">2.30% tasa conversi√≥n</div>
        </div>
        <div class="kpi-card" style="border-color:rgba(139,92,246,0.3)">
          <div class="kpi-label">üìà M√°s Tr√°fico</div>
          <div class="kpi-value" style="font-size:18px;color:var(--purple)">Paid Social</div>
          <div class="kpi-sub">2.875 sesiones</div>
        </div>
        <div class="kpi-card" style="border-color:rgba(245,158,11,0.3)">
          <div class="kpi-label">üë§ % Nuevos Usuarios</div>
          <div class="kpi-value" style="font-size:18px;color:var(--yellow)">88.5%</div>
          <div class="kpi-sub">de todos los usuarios</div>
        </div>
      </div>

      <!-- Recommendation Box -->
      <div class="insights-box" style="margin-top:20px">
        <div class="insights-title">üí° Recomendaciones ‚Äî GA4 & Estrategia de Canales</div>
        <ul class="insights-list">
          <li><strong style="color:var(--text-primary)">Direct (74% revenue, 2.30% conv rate):</strong> potenciar email marketing y retargeting para capturar m√°s tr√°fico directo recurrente</li>
          <li><strong style="color:var(--text-primary)">Paid Social (2.875 ses., 1 conv.):</strong> el pixel de Meta est√° roto ‚Äî 0.03% conv. rate es anormalmente bajo ‚Üí corregir tracking urgente</li>
          <li><strong style="color:var(--text-primary)">Organic Search (678 nuevos usuarios):</strong> buen potencial de SEO ‚Äî invertir en contenido para t√©rminos de depilaci√≥n l√°ser en Chile</li>
          <li><strong style="color:var(--text-primary)">Organic Social (1.052 ses., 5 conv.):</strong> buen engagement org√°nico ‚Üí incrementar frecuencia de publicaci√≥n con casos de √©xito</li>
        </ul>
      </div>
    </div>

    <!-- ===== CONFIG PAGE ===== -->
    <div class="page" id="page-config">
      <div class="coming-soon">
        <div class="cs-icon">‚öôÔ∏è</div>
        <h2>Configuraci√≥n</h2>
        <p style="color:var(--text-muted);font-size:14px">Pr√≥ximamente: integraciones, alertas autom√°ticas, webhooks y m√°s</p>
      </div>
    </div>

  </div><!-- /.page-content -->
</div><!-- /.main -->

<script>
// ===== EMBEDDED DATA =====
const shopifyOrders = [{"id": 6795683135740, "created_at": "2026-02-23T14:59:58-03:00", "date": "2026-02-23", "total": 392341.0, "customer": "Mar√≠a jose Villarroel rubilar", "financial_status": "partially_paid", "is_new": true}, {"id": 6795643289852, "created_at": "2026-02-23T14:33:22-03:00", "date": "2026-02-23", "total": 39990.0, "customer": "Viviana escobar veas", "financial_status": "paid", "is_new": true}, {"id": 6795559010556, "created_at": "2026-02-23T13:41:29-03:00", "date": "2026-02-23", "total": 283000.0, "customer": "Silvana Vega Saure", "financial_status": "paid", "is_new": true}, {"id": 6795550097660, "created_at": "2026-02-23T13:35:24-03:00", "date": "2026-02-23", "total": 19800.0, "customer": "KAREN WOLF PORZIO", "financial_status": "paid", "is_new": true}, {"id": 6795300307196, "created_at": "2026-02-23T10:47:23-03:00", "date": "2026-02-23", "total": 35000.0, "customer": "Francisca Madrid Madrid", "financial_status": "paid", "is_new": true}, {"id": 6795280843004, "created_at": "2026-02-23T10:31:49-03:00", "date": "2026-02-23", "total": 120000.0, "customer": "Karen Mu√±oz Saavedra", "financial_status": "paid", "is_new": true}, {"id": 6795279958268, "created_at": "2026-02-23T10:30:58-03:00", "date": "2026-02-23", "total": 283500.0, "customer": "CECILIA DELGADO", "financial_status": "paid", "is_new": true}, {"id": 6791678001404, "created_at": "2026-02-21T14:10:01-03:00", "date": "2026-02-21", "total": 250000.0, "customer": "Sandra Carolina Torrales Cortez", "financial_status": "paid", "is_new": true}, {"id": 6791669448956, "created_at": "2026-02-21T14:05:44-03:00", "date": "2026-02-21", "total": 15000.0, "customer": "Constanza Rivera", "financial_status": "paid", "is_new": true}, {"id": 6791628357884, "created_at": "2026-02-21T13:44:43-03:00", "date": "2026-02-21", "total": 150000.0, "customer": "Nicole Gonzalez Contreras", "financial_status": "paid", "is_new": true}, {"id": 6791626686716, "created_at": "2026-02-21T13:43:40-03:00", "date": "2026-02-21", "total": 100000.0, "customer": "Nicole Gonzalez Contreras", "financial_status": "paid", "is_new": true}, {"id": 6791479427324, "created_at": "2026-02-21T12:21:24-03:00", "date": "2026-02-21", "total": 64000.0, "customer": "Graciela Olivares Calderon", "financial_status": "paid", "is_new": true}, {"id": 6791288783100, "created_at": "2026-02-21T10:10:49-03:00", "date": "2026-02-21", "total": 35000.0, "customer": "LIDICE SALINAS", "financial_status": "paid", "is_new": true}, {"id": 6790174474492, "created_at": "2026-02-20T18:12:21-03:00", "date": "2026-02-20", "total": 25000.0, "customer": "Valentina Garcia", "financial_status": "paid", "is_new": true}, {"id": 6790066995452, "created_at": "2026-02-20T17:05:24-03:00", "date": "2026-02-20", "total": 47000.0, "customer": "Franco Gioia mancilla", "financial_status": "paid", "is_new": true}, {"id": 6789944705276, "created_at": "2026-02-20T15:57:26-03:00", "date": "2026-02-20", "total": 400000.0, "customer": "Rixi Eliana Urtubia Ortega", "financial_status": "paid", "is_new": true}, {"id": 6788210131196, "created_at": "2026-02-19T17:29:44-03:00", "date": "2026-02-19", "total": 120000.0, "customer": "Florencia Salvatierra Gonzalez", "financial_status": "paid", "is_new": true}, {"id": 6788104880380, "created_at": "2026-02-19T16:31:12-03:00", "date": "2026-02-19", "total": 320000.0, "customer": "DANIELA IBACACHE GALDAMES", "financial_status": "paid", "is_new": true}, {"id": 6787754787068, "created_at": "2026-02-19T13:09:33-03:00", "date": "2026-02-19", "total": 173500.0, "customer": "LESLIE LORENA OLIVARES SILVA", "financial_status": "paid", "is_new": true}, {"id": 6786347237628, "created_at": "2026-02-18T17:20:53-03:00", "date": "2026-02-18", "total": 105000.0, "customer": "Maria Jesus Arellano Caceres", "financial_status": "paid", "is_new": true}, {"id": 6786174943484, "created_at": "2026-02-18T15:33:29-03:00", "date": "2026-02-18", "total": 125000.0, "customer": "Maria jesus Gonzales Rivera", "financial_status": "paid", "is_new": true}, {"id": 6786030731516, "created_at": "2026-02-18T14:04:07-03:00", "date": "2026-02-18", "total": 165000.0, "customer": "Karen Contreras Pulgar", "financial_status": "paid", "is_new": true}, {"id": 6786019819772, "created_at": "2026-02-18T13:58:21-03:00", "date": "2026-02-18", "total": 25000.0, "customer": "Maribel Meza", "financial_status": "paid", "is_new": true}, {"id": 6785748631804, "created_at": "2026-02-18T10:53:00-03:00", "date": "2026-02-18", "total": 25000.0, "customer": "Katherine S√°nchez", "financial_status": "paid", "is_new": true}, {"id": 6785744568572, "created_at": "2026-02-18T10:49:00-03:00", "date": "2026-02-18", "total": 178500.0, "customer": "Angie Villalobos", "financial_status": "paid", "is_new": true}, {"id": 6784820478204, "created_at": "2026-02-17T19:57:21-03:00", "date": "2026-02-17", "total": 400000.0, "customer": "Francisca Valencia zamora", "financial_status": "paid", "is_new": true}, {"id": 6784813695228, "created_at": "2026-02-17T19:51:55-03:00", "date": "2026-02-17", "total": 25000.0, "customer": "Katherine Troncoso Uyarte", "financial_status": "paid", "is_new": true}, {"id": 6784604111100, "created_at": "2026-02-17T17:16:23-03:00", "date": "2026-02-17", "total": 200000.0, "customer": "Alejandra Andrea Iligaray Arteaga", "financial_status": "paid", "is_new": true}, {"id": 6784438075644, "created_at": "2026-02-17T15:29:00-03:00", "date": "2026-02-17", "total": 254700.0, "customer": "Gabriela Lobos Bermal", "financial_status": "paid", "is_new": true}, {"id": 6784090702076, "created_at": "2026-02-17T11:46:14-03:00", "date": "2026-02-17", "total": 100000.0, "customer": "ESTEBAN RETAMAL", "financial_status": "paid", "is_new": true}, {"id": 6783914606844, "created_at": "2026-02-17T10:54:43-03:00", "date": "2026-02-17", "total": 32900.0, "customer": "Maria Pilar Olavarria Fuentes", "financial_status": "paid", "is_new": true}, {"id": 6781961568508, "created_at": "2026-02-16T18:03:18-03:00", "date": "2026-02-16", "total": 160270.0, "customer": "Marta Parra galdamez", "financial_status": "paid", "is_new": true}, {"id": 6781645062396, "created_at": "2026-02-16T14:58:19-03:00", "date": "2026-02-16", "total": 212800.0, "customer": "Katherine S√°nchez", "financial_status": "paid", "is_new": true}, {"id": 6781390455036, "created_at": "2026-02-16T12:31:52-03:00", "date": "2026-02-16", "total": 22000.0, "customer": "Paulina Leiva Montenegro", "financial_status": "paid", "is_new": true}, {"id": 6781332226300, "created_at": "2026-02-16T12:00:14-03:00", "date": "2026-02-16", "total": 25000.0, "customer": "Victoria Escobar", "financial_status": "paid", "is_new": true}, {"id": 6781293330684, "created_at": "2026-02-16T11:35:11-03:00", "date": "2026-02-16", "total": 15000.0, "customer": "Sarela Figeroa", "financial_status": "paid", "is_new": true}, {"id": 6781282615548, "created_at": "2026-02-16T11:27:44-03:00", "date": "2026-02-16", "total": 47000.0, "customer": "Giovanna Aranguiz Herrera", "financial_status": "paid", "is_new": true}, {"id": 6781282156796, "created_at": "2026-02-16T11:27:22-03:00", "date": "2026-02-16", "total": 283000.0, "customer": "Natalia Saa macilla", "financial_status": "paid", "is_new": true}, {"id": 6781274980604, "created_at": "2026-02-16T11:21:40-03:00", "date": "2026-02-16", "total": 60000.0, "customer": "Giovanna Aranguiz Herrera", "financial_status": "paid", "is_new": true}, {"id": 6781190242556, "created_at": "2026-02-16T10:24:07-03:00", "date": "2026-02-16", "total": 450000.0, "customer": "maria Carolina Herrera Navarro", "financial_status": "paid", "is_new": true}, {"id": 6777409962236, "created_at": "2026-02-14T14:13:37-03:00", "date": "2026-02-14", "total": 50000.0, "customer": "Mar√≠a Maldonado Navarrete", "financial_status": "paid", "is_new": true}, {"id": 6777357402364, "created_at": "2026-02-14T13:45:17-03:00", "date": "2026-02-14", "total": 83500.0, "customer": "Pablo Olivares Herrera", "financial_status": "paid", "is_new": true}, {"id": 6777235898620, "created_at": "2026-02-14T12:35:29-03:00", "date": "2026-02-14", "total": 79400.0, "customer": "Lissette Arancibia", "financial_status": "paid", "is_new": true}, {"id": 6776027611388, "created_at": "2026-02-13T19:01:54-03:00", "date": "2026-02-13", "total": 40000.0, "customer": "May Castro Cueto", "financial_status": "paid", "is_new": true}, {"id": 6775809507580, "created_at": "2026-02-13T16:55:54-03:00", "date": "2026-02-13", "total": 127000.0, "customer": "Jocelyn Dominguez Gonzalez", "financial_status": "paid", "is_new": true}, {"id": 6775780802812, "created_at": "2026-02-13T16:38:15-03:00", "date": "2026-02-13", "total": 300000.0, "customer": "PAZ ALEJANDRA POZO VEGA", "financial_status": "paid", "is_new": true}, {"id": 6775777624316, "created_at": "2026-02-13T16:36:09-03:00", "date": "2026-02-13", "total": 150000.0, "customer": "PAZ ALEJANDRA POZO VEGA", "financial_status": "paid", "is_new": true}, {"id": 6775701438716, "created_at": "2026-02-13T15:51:51-03:00", "date": "2026-02-13", "total": 700000.0, "customer": "Claudia Lopez Vargas", "financial_status": "paid", "is_new": true}, {"id": 6775679025404, "created_at": "2026-02-13T15:38:36-03:00", "date": "2026-02-13", "total": 54990.0, "customer": "Nancy Valero Meneses", "financial_status": "paid", "is_new": true}, {"id": 6775671718140, "created_at": "2026-02-13T15:33:26-03:00", "date": "2026-02-13", "total": 25000.0, "customer": "Rixi Eliana Urtubia Ortega", "financial_status": "paid", "is_new": true}, {"id": 6775401840892, "created_at": "2026-02-13T12:59:36-03:00", "date": "2026-02-13", "total": 244500.0, "customer": "Carolina Mora Manriquez", "financial_status": "paid", "is_new": true}, {"id": 6775337484540, "created_at": "2026-02-13T12:20:37-03:00", "date": "2026-02-13", "total": 25000.0, "customer": "Mar√≠a paz rosas", "financial_status": "paid", "is_new": true}, {"id": 6775226859772, "created_at": "2026-02-13T11:04:52-03:00", "date": "2026-02-13", "total": 93500.0, "customer": "Carlota Vicencio Salas", "financial_status": "paid", "is_new": true}, {"id": 6775212474620, "created_at": "2026-02-13T10:54:26-03:00", "date": "2026-02-13", "total": 40000.0, "customer": "Ana Sanchez Tapia", "financial_status": "paid", "is_new": true}, {"id": 6775193436412, "created_at": "2026-02-13T10:37:39-03:00", "date": "2026-02-13", "total": 50000.0, "customer": "Ana Sanchez Tapia", "financial_status": "paid", "is_new": true}, {"id": 6775190388988, "created_at": "2026-02-13T10:34:32-03:00", "date": "2026-02-13", "total": 7000.0, "customer": "Katherine Sepulveda Gonzalez", "financial_status": "paid", "is_new": true}, {"id": 6775189078268, "created_at": "2026-02-13T10:33:15-03:00", "date": "2026-02-13", "total": 80000.0, "customer": "Katherine Sepulveda Gonzalez", "financial_status": "paid", "is_new": true}, {"id": 6774206890236, "created_at": "2026-02-12T18:59:12-03:00", "date": "2026-02-12", "total": 40000.0, "customer": "Pia Hinostroza", "financial_status": "paid", "is_new": true}, {"id": 6774145155324, "created_at": "2026-02-12T18:15:46-03:00", "date": "2026-02-12", "total": 174990.0, "customer": "Karen Alejandra Tapia Soto", "financial_status": "paid", "is_new": true}, {"id": 6774139453692, "created_at": "2026-02-12T18:11:53-03:00", "date": "2026-02-12", "total": 25000.0, "customer": "Maria Angela Silva Carmona", "financial_status": "paid", "is_new": true}, {"id": 6773939929340, "created_at": "2026-02-12T16:25:23-03:00", "date": "2026-02-12", "total": 39990.0, "customer": "Diana Cisterna", "financial_status": "paid", "is_new": true}, {"id": 6773934686460, "created_at": "2026-02-12T16:21:00-03:00", "date": "2026-02-12", "total": 305500.0, "customer": "Diana Cisterna", "financial_status": "paid", "is_new": true}, {"id": 6773930361084, "created_at": "2026-02-12T16:18:06-03:00", "date": "2026-02-12", "total": 650990.0, "customer": "Maria Isabel Cofre", "financial_status": "paid", "is_new": true}, {"id": 6773497823484, "created_at": "2026-02-12T13:01:44-03:00", "date": "2026-02-12", "total": 120000.0, "customer": "katheryn Jimenez", "financial_status": "paid", "is_new": true}, {"id": 6773309669628, "created_at": "2026-02-12T11:19:20-03:00", "date": "2026-02-12", "total": 104000.0, "customer": "Luisa Eliana Paz lopez", "financial_status": "paid", "is_new": true}, {"id": 6773245280508, "created_at": "2026-02-12T10:29:24-03:00", "date": "2026-02-12", "total": 40000.0, "customer": "MARIELA BUSTAMANTE LEPEZ", "financial_status": "paid", "is_new": true}, {"id": 6772168261884, "created_at": "2026-02-11T17:53:56-03:00", "date": "2026-02-11", "total": 40300.0, "customer": "Camila Molina Nieto", "financial_status": "paid", "is_new": true}, {"id": 6772163969276, "created_at": "2026-02-11T17:50:11-03:00", "date": "2026-02-11", "total": 125000.0, "customer": "Maria jesus Gonzales Rivera", "financial_status": "paid", "is_new": true}, {"id": 6772151484668, "created_at": "2026-02-11T17:42:37-03:00", "date": "2026-02-11", "total": 20000.0, "customer": "Milca Anjari Caro", "financial_status": "paid", "is_new": true}, {"id": 6772120813820, "created_at": "2026-02-11T17:22:06-03:00", "date": "2026-02-11", "total": 156800.0, "customer": "Claudia Salgado Pulgar", "financial_status": "paid", "is_new": true}, {"id": 6772016578812, "created_at": "2026-02-11T16:13:42-03:00", "date": "2026-02-11", "total": 25000.0, "customer": "Francisca Valencia zamora", "financial_status": "paid", "is_new": true}, {"id": 6771669238012, "created_at": "2026-02-11T12:32:13-03:00", "date": "2026-02-11", "total": 74800.0, "customer": "Mar√≠a In√©s Cea Gamboa", "financial_status": "paid", "is_new": true}, {"id": 6770576818428, "created_at": "2026-02-10T19:40:12-03:00", "date": "2026-02-10", "total": 108000.0, "customer": "Denisse Salinas Pereira", "financial_status": "paid", "is_new": true}, {"id": 6770564301052, "created_at": "2026-02-10T19:30:29-03:00", "date": "2026-02-10", "total": 2000000.0, "customer": "Carla Lemus", "financial_status": "paid", "is_new": true}, {"id": 6770518917372, "created_at": "2026-02-10T18:54:47-03:00", "date": "2026-02-10", "total": 305500.0, "customer": "Diana Cisterna", "financial_status": "paid", "is_new": true}, {"id": 6770019074300, "created_at": "2026-02-10T13:20:15-03:00", "date": "2026-02-10", "total": 5000.0, "customer": "Fernanda Guerra Olgu√≠n", "financial_status": "paid", "is_new": true}, {"id": 6769875845372, "created_at": "2026-02-10T11:45:12-03:00", "date": "2026-02-10", "total": 71400.0, "customer": "Patricia Valdes Ca√±ete", "financial_status": "paid", "is_new": true}, {"id": 6769871028476, "created_at": "2026-02-10T11:40:58-03:00", "date": "2026-02-10", "total": 93500.0, "customer": "FABIAN CORTES", "financial_status": "paid", "is_new": true}, {"id": 6769775247612, "created_at": "2026-02-10T10:29:14-03:00", "date": "2026-02-10", "total": 25000.0, "customer": "AIDA ARMIJO", "financial_status": "paid", "is_new": true}, {"id": 6768794304764, "created_at": "2026-02-09T18:49:19-03:00", "date": "2026-02-09", "total": 32000.0, "customer": "Pia Palma", "financial_status": "paid", "is_new": true}, {"id": 6768790110460, "created_at": "2026-02-09T18:46:28-03:00", "date": "2026-02-09", "total": 415000.0, "customer": "FABIAN CORTES", "financial_status": "paid", "is_new": true}, {"id": 6768472031484, "created_at": "2026-02-09T15:10:14-03:00", "date": "2026-02-09", "total": 15000.0, "customer": "Daniela Sandoval", "financial_status": "paid", "is_new": true}, {"id": 6768282435836, "created_at": "2026-02-09T13:08:29-03:00", "date": "2026-02-09", "total": 366000.0, "customer": "Jehily Mesina Paras", "financial_status": "paid", "is_new": true}, {"id": 6764632146172, "created_at": "2026-02-07T12:58:20-03:00", "date": "2026-02-07", "total": 74000.0, "customer": "Ximena Rivas", "financial_status": "paid", "is_new": true}, {"id": 6763261264124, "created_at": "2026-02-06T17:39:55-03:00", "date": "2026-02-06", "total": 15000.0, "customer": "Valeria Poggi Aburto", "financial_status": "paid", "is_new": true}, {"id": 6763180097788, "created_at": "2026-02-06T16:53:41-03:00", "date": "2026-02-06", "total": 292000.0, "customer": "Carlo Caneo Vera", "financial_status": "paid", "is_new": true}, {"id": 6763118592252, "created_at": "2026-02-06T16:15:24-03:00", "date": "2026-02-06", "total": 25000.0, "customer": "Maria Ester Balcazar Perez", "financial_status": "paid", "is_new": true}, {"id": 6763104207100, "created_at": "2026-02-06T16:06:21-03:00", "date": "2026-02-06", "total": 70000.0, "customer": "Isidora Jhonson Rasse", "financial_status": "paid", "is_new": true}, {"id": 6763004821756, "created_at": "2026-02-06T15:07:54-03:00", "date": "2026-02-06", "total": 47000.0, "customer": "Stefania Fuentes Montenegro", "financial_status": "paid", "is_new": true}, {"id": 6762950492412, "created_at": "2026-02-06T14:35:11-03:00", "date": "2026-02-06", "total": 49500.0, "customer": "Natalia Calder√≥n Rojas", "financial_status": "paid", "is_new": true}, {"id": 6762871914748, "created_at": "2026-02-06T13:50:07-03:00", "date": "2026-02-06", "total": 59200.0, "customer": "Ana maria", "financial_status": "paid", "is_new": true}, {"id": 6762637426940, "created_at": "2026-02-06T11:35:16-03:00", "date": "2026-02-06", "total": 15000.0, "customer": "Giovanna Aranguiz Herrera", "financial_status": "paid", "is_new": true}, {"id": 6761569812732, "created_at": "2026-02-05T19:21:55-03:00", "date": "2026-02-05", "total": 37000.0, "customer": "Nicole Borquez", "financial_status": "paid", "is_new": true}, {"id": 6761470460156, "created_at": "2026-02-05T18:12:01-03:00", "date": "2026-02-05", "total": 119800.0, "customer": "Cynthia Osorio", "financial_status": "paid", "is_new": true}, {"id": 6761401286908, "created_at": "2026-02-05T17:25:24-03:00", "date": "2026-02-05", "total": 25000.0, "customer": "Carla Lemus", "financial_status": "paid", "is_new": true}, {"id": 6761287549180, "created_at": "2026-02-05T16:13:59-03:00", "date": "2026-02-05", "total": 182700.0, "customer": "Paula Garrido Saa", "financial_status": "paid", "is_new": true}, {"id": 6761199501564, "created_at": "2026-02-05T15:19:15-03:00", "date": "2026-02-05", "total": 57000.0, "customer": "Elisa Garay Diaz", "financial_status": "paid", "is_new": true}, {"id": 6760918614268, "created_at": "2026-02-05T12:31:58-03:00", "date": "2026-02-05", "total": 20000.0, "customer": "Angie Villalobos", "financial_status": "paid", "is_new": true}, {"id": 6760825094396, "created_at": "2026-02-05T11:30:15-03:00", "date": "2026-02-05", "total": 10000.0, "customer": "Melanie Hauyon Leiva", "financial_status": "paid", "is_new": true}, {"id": 6760755790076, "created_at": "2026-02-05T10:38:41-03:00", "date": "2026-02-05", "total": 74800.0, "customer": "Angelica Escudero Vargas", "financial_status": "paid", "is_new": true}, {"id": 6760676950268, "created_at": "2026-02-05T09:30:36-03:00", "date": "2026-02-05", "total": 25000.0, "customer": "Alejandra Andrea Iligaray Arteaga", "financial_status": "paid", "is_new": true}, {"id": 6759810433276, "created_at": "2026-02-04T19:41:24-03:00", "date": "2026-02-04", "total": 141000.0, "customer": "Alexandra Bustamante Lazcano", "financial_status": "paid", "is_new": true}, {"id": 6759663239420, "created_at": "2026-02-04T17:54:44-03:00", "date": "2026-02-04", "total": 87000.0, "customer": "Graciela Bruzon", "financial_status": "paid", "is_new": true}, {"id": 6759494353148, "created_at": "2026-02-04T16:08:08-03:00", "date": "2026-02-04", "total": 94000.0, "customer": "Martina Rodriguez", "financial_status": "paid", "is_new": true}, {"id": 6759383892220, "created_at": "2026-02-04T15:00:53-03:00", "date": "2026-02-04", "total": 27000.0, "customer": "Cristian Alejandro Palacios Palacios", "financial_status": "paid", "is_new": true}, {"id": 6758001606908, "created_at": "2026-02-03T19:15:40-03:00", "date": "2026-02-03", "total": 400000.0, "customer": "Danitza Perez flores", "financial_status": "paid", "is_new": true}, {"id": 6757761679612, "created_at": "2026-02-03T16:30:29-03:00", "date": "2026-02-03", "total": 75000.0, "customer": "Nicole Inal", "financial_status": "paid", "is_new": true}, {"id": 6757710463228, "created_at": "2026-02-03T15:55:13-03:00", "date": "2026-02-03", "total": 30000.0, "customer": "Ignacio Quintanilla Lobos", "financial_status": "paid", "is_new": true}, {"id": 6757658984700, "created_at": "2026-02-03T15:22:27-03:00", "date": "2026-02-03", "total": 15000.0, "customer": "Daniela Sandoval", "financial_status": "paid", "is_new": true}, {"id": 6757234737404, "created_at": "2026-02-03T10:34:38-03:00", "date": "2026-02-03", "total": 75000.0, "customer": "Ambar Caiceo maturana", "financial_status": "paid", "is_new": true}, {"id": 6756264902908, "created_at": "2026-02-02T19:20:42-03:00", "date": "2026-02-02", "total": 7000.0, "customer": "Andrea Zamora", "financial_status": "paid", "is_new": true}, {"id": 6756263362812, "created_at": "2026-02-02T19:19:28-03:00", "date": "2026-02-02", "total": 80000.0, "customer": "Andrea Zamora", "financial_status": "paid", "is_new": true}, {"id": 6756185637116, "created_at": "2026-02-02T18:25:26-03:00", "date": "2026-02-02", "total": 35000.0, "customer": "Christian Acevedo Diaz", "financial_status": "paid", "is_new": true}, {"id": 6756068655356, "created_at": "2026-02-02T17:06:03-03:00", "date": "2026-02-02", "total": 50000.0, "customer": "Daniela Castro Sepulveda", "financial_status": "paid", "is_new": true}, {"id": 6755405562108, "created_at": "2026-02-02T09:48:00-03:00", "date": "2026-02-02", "total": 133480.0, "customer": "Natalye Lisette Fern√°ndez Casas Cordero", "financial_status": "paid", "is_new": true}, {"id": 6752447299836, "created_at": "2026-01-31T19:14:34-03:00", "date": "2026-01-31", "total": 61400.0, "customer": "Caroline Lucero", "financial_status": "paid", "is_new": true}, {"id": 6752194003196, "created_at": "2026-01-31T16:59:44-03:00", "date": "2026-01-31", "total": 59430.0, "customer": "Valeria Olivares Zapata", "financial_status": "paid", "is_new": true}, {"id": 6751885754620, "created_at": "2026-01-31T14:28:42-03:00", "date": "2026-01-31", "total": 285200.0, "customer": "Eduardo Leiva Rojas", "financial_status": "paid", "is_new": true}, {"id": 6751750193404, "created_at": "2026-01-31T13:23:15-03:00", "date": "2026-01-31", "total": 450000.0, "customer": "Tamara Atuan Olivares", "financial_status": "paid", "is_new": true}, {"id": 6751588614396, "created_at": "2026-01-31T11:52:24-03:00", "date": "2026-01-31", "total": 125000.0, "customer": "Maria Soledad Del Campo Bustos", "financial_status": "paid", "is_new": true}, {"id": 6751551488252, "created_at": "2026-01-31T11:28:57-03:00", "date": "2026-01-31", "total": 25000.0, "customer": "Stefania Fuentes Montenegro", "financial_status": "paid", "is_new": true}, {"id": 6751373787388, "created_at": "2026-01-31T09:09:41-03:00", "date": "2026-01-31", "total": 178800.0, "customer": "Maria Teresa Leiva Sanchez", "financial_status": "paid", "is_new": true}, {"id": 6750423482620, "created_at": "2026-01-30T19:05:54-03:00", "date": "2026-01-30", "total": 25000.0, "customer": "Jocelyn Escobar Avila", "financial_status": "paid", "is_new": true}, {"id": 6750389534972, "created_at": "2026-01-30T18:43:40-03:00", "date": "2026-01-30", "total": 200000.0, "customer": "Jocelyn Dominguez Gonzalez", "financial_status": "paid", "is_new": true}, {"id": 6750373970172, "created_at": "2026-01-30T18:32:35-03:00", "date": "2026-01-30", "total": 280000.0, "customer": "Noelia Fernandez Aluch", "financial_status": "paid", "is_new": true}, {"id": 6750361026812, "created_at": "2026-01-30T18:25:18-03:00", "date": "2026-01-30", "total": 400000.0, "customer": "Paula Arancibia", "financial_status": "paid", "is_new": true}, {"id": 6750311907580, "created_at": "2026-01-30T17:53:40-03:00", "date": "2026-01-30", "total": 7000.0, "customer": "Mayte Isidora Lobos Vergara", "financial_status": "paid", "is_new": true}, {"id": 6750285529340, "created_at": "2026-01-30T17:37:11-03:00", "date": "2026-01-30", "total": 142800.0, "customer": "Pamela Tapia Manterola", "financial_status": "paid", "is_new": true}, {"id": 6750264230140, "created_at": "2026-01-30T17:24:09-03:00", "date": "2026-01-30", "total": 87000.0, "customer": "Marlene Oriana Araus Farias", "financial_status": "paid", "is_new": true}, {"id": 6750168416508, "created_at": "2026-01-30T16:31:34-03:00", "date": "2026-01-30", "total": 300000.0, "customer": "Javiera Andrea Fontecilla Pizarro", "financial_status": "paid", "is_new": true}, {"id": 6750123065596, "created_at": "2026-01-30T16:03:49-03:00", "date": "2026-01-30", "total": 970000.0, "customer": "Andrea P√°ez Torres", "financial_status": "paid", "is_new": true}, {"id": 6750052647164, "created_at": "2026-01-30T15:23:12-03:00", "date": "2026-01-30", "total": 1310000.0, "customer": "Alejandra Donoso", "financial_status": "paid", "is_new": true}, {"id": 6749957488892, "created_at": "2026-01-30T14:28:26-03:00", "date": "2026-01-30", "total": 500000.0, "customer": "Jocelyn Dominguez Gonzalez", "financial_status": "paid", "is_new": true}, {"id": 6749940711676, "created_at": "2026-01-30T14:17:38-03:00", "date": "2026-01-30", "total": 27000.0, "customer": "Marlene Toro araus", "financial_status": "paid", "is_new": true}, {"id": 6749866295548, "created_at": "2026-01-30T13:34:50-03:00", "date": "2026-01-30", "total": 307600.0, "customer": "Barbara Ramirez", "financial_status": "paid", "is_new": true}, {"id": 6749789356284, "created_at": "2026-01-30T12:50:05-03:00", "date": "2026-01-30", "total": 25000.0, "customer": "Andrea P√°ez Torres", "financial_status": "paid", "is_new": true}, {"id": 6749773791484, "created_at": "2026-01-30T12:41:16-03:00", "date": "2026-01-30", "total": 20000.0, "customer": "Cristian Alejandro Palacios Palacios", "financial_status": "paid", "is_new": true}, {"id": 6749706322172, "created_at": "2026-01-30T12:01:42-03:00", "date": "2026-01-30", "total": 30000.0, "customer": "Constanza Ortiz Rey", "financial_status": "paid", "is_new": true}, {"id": 6749500735740, "created_at": "2026-01-30T09:36:14-03:00", "date": "2026-01-30", "total": 91350.0, "customer": "Paola Palomino Maldonado", "financial_status": "paid", "is_new": true}, {"id": 6748366536956, "created_at": "2026-01-29T16:51:15-03:00", "date": "2026-01-29", "total": 64000.0, "customer": "Daniela Teresa Lozano Fernandez", "financial_status": "paid", "is_new": true}, {"id": 6748364833020, "created_at": "2026-01-29T16:50:14-03:00", "date": "2026-01-29", "total": 40000.0, "customer": "Martina Rodriguez", "financial_status": "paid", "is_new": true}, {"id": 6748284223740, "created_at": "2026-01-29T16:00:42-03:00", "date": "2026-01-29", "total": 125000.0, "customer": "Maria Soledad Del Campo Bustos", "financial_status": "paid", "is_new": true}, {"id": 6748204859644, "created_at": "2026-01-29T15:14:23-03:00", "date": "2026-01-29", "total": 231000.0, "customer": "Maria Chandia Castillo", "financial_status": "paid", "is_new": true}, {"id": 6748202959100, "created_at": "2026-01-29T15:13:07-03:00", "date": "2026-01-29", "total": 22000.0, "customer": "BETSABE AMESTICA", "financial_status": "paid", "is_new": true}, {"id": 6747752530172, "created_at": "2026-01-29T10:23:05-03:00", "date": "2026-01-29", "total": 72500.0, "customer": "Aracelly paras Gomez", "financial_status": "paid", "is_new": true}, {"id": 6746184777980, "created_at": "2026-01-28T15:04:29-03:00", "date": "2026-01-28", "total": 14150.0, "customer": "catalina Mundaca", "financial_status": "paid", "is_new": true}, {"id": 6745949176060, "created_at": "2026-01-28T12:39:42-03:00", "date": "2026-01-28", "total": 120000.0, "customer": "Marlen Tapia", "financial_status": "paid", "is_new": true}, {"id": 6745751519484, "created_at": "2026-01-28T10:26:14-03:00", "date": "2026-01-28", "total": 50000.0, "customer": "Barbara Ramirez", "financial_status": "paid", "is_new": true}, {"id": 6745734316284, "created_at": "2026-01-28T10:11:48-03:00", "date": "2026-01-28", "total": 35000.0, "customer": "Elizabeth Palma Avila", "financial_status": "paid", "is_new": true}, {"id": 6745730941180, "created_at": "2026-01-28T10:08:40-03:00", "date": "2026-01-28", "total": 30000.0, "customer": "Patricia Mu√±oz Cataldo", "financial_status": "paid", "is_new": true}, {"id": 6745730679036, "created_at": "2026-01-28T10:08:29-03:00", "date": "2026-01-28", "total": 25000.0, "customer": "Francisca Ignacia Cordova Vivar", "financial_status": "paid", "is_new": true}, {"id": 6745652756732, "created_at": "2026-01-28T08:56:50-03:00", "date": "2026-01-28", "total": 30000.0, "customer": "Maria Mu√±oz Cataldo", "financial_status": "paid", "is_new": true}, {"id": 6744322638076, "created_at": "2026-01-27T18:39:30-03:00", "date": "2026-01-27", "total": 0.0, "customer": "Fernanda G.", "financial_status": "paid", "is_new": true}, {"id": 6744191926524, "created_at": "2026-01-27T17:14:15-03:00", "date": "2026-01-27", "total": 50000.0, "customer": "Maria Luisa Mu√±oz Vera", "financial_status": "paid", "is_new": true}, {"id": 6744017567996, "created_at": "2026-01-27T15:33:23-03:00", "date": "2026-01-27", "total": 47000.0, "customer": "Quelly Iriarte Cobarrubia", "financial_status": "paid", "is_new": true}, {"id": 6743942856956, "created_at": "2026-01-27T14:47:08-03:00", "date": "2026-01-27", "total": 74800.0, "customer": "Valeria Rojas Baez", "financial_status": "paid", "is_new": true}, {"id": 6742570303740, "created_at": "2026-01-26T19:44:31-03:00", "date": "2026-01-26", "total": 93500.0, "customer": "Tamara Herrera Silva", "financial_status": "paid", "is_new": true}, {"id": 6742474653948, "created_at": "2026-01-26T18:28:04-03:00", "date": "2026-01-26", "total": 100000.0, "customer": "Maria Aguilar Romero", "financial_status": "paid", "is_new": true}, {"id": 6742448799996, "created_at": "2026-01-26T18:09:09-03:00", "date": "2026-01-26", "total": 36000.0, "customer": "Constanza Mesa", "financial_status": "paid", "is_new": true}, {"id": 6741977792764, "created_at": "2026-01-26T12:51:14-03:00", "date": "2026-01-26", "total": 500000.0, "customer": "Jocelyn Dominguez Gonzalez", "financial_status": "paid", "is_new": true}, {"id": 6741940666620, "created_at": "2026-01-26T12:27:39-03:00", "date": "2026-01-26", "total": 47000.0, "customer": "Quelly Iriarte Cobarrubia", "financial_status": "paid", "is_new": true}, {"id": 6741925855484, "created_at": "2026-01-26T12:17:50-03:00", "date": "2026-01-26", "total": 14100.0, "customer": "Maria Pilar Olavarria Fuentes", "financial_status": "paid", "is_new": true}, {"id": 6741743075580, "created_at": "2026-01-26T10:07:24-03:00", "date": "2026-01-26", "total": 74800.0, "customer": "Esteban Fajardo", "financial_status": "paid", "is_new": true}, {"id": 6738418598140, "created_at": "2026-01-24T13:38:34-03:00", "date": "2026-01-24", "total": 317600.0, "customer": "Alejandra Donoso", "financial_status": "paid", "is_new": true}, {"id": 6738417189116, "created_at": "2026-01-24T13:37:54-03:00", "date": "2026-01-24", "total": 40000.0, "customer": "Yanet Torres", "financial_status": "paid", "is_new": true}, {"id": 6738095276284, "created_at": "2026-01-24T10:29:45-03:00", "date": "2026-01-24", "total": 38900.0, "customer": "Jazmina Gomez Lopez", "financial_status": "paid", "is_new": true}, {"id": 6738057953532, "created_at": "2026-01-24T10:02:38-03:00", "date": "2026-01-24", "total": 274300.0, "customer": "Javiera Flores", "financial_status": "paid", "is_new": true}, {"id": 6736970252540, "created_at": "2026-01-23T19:59:07-03:00", "date": "2026-01-23", "total": 100800.0, "customer": "Alejandro Gonzalez Quilodran", "financial_status": "paid", "is_new": true}, {"id": 6736915595516, "created_at": "2026-01-23T19:26:38-03:00", "date": "2026-01-23", "total": 25000.0, "customer": "Danitza Perez flores", "financial_status": "paid", "is_new": true}, {"id": 6736245981436, "created_at": "2026-01-23T16:09:52-03:00", "date": "2026-01-23", "total": 240840.0, "customer": "Mariagnis Gotopo", "financial_status": "paid", "is_new": true}, {"id": 6736235823356, "created_at": "2026-01-23T16:07:52-03:00", "date": "2026-01-23", "total": 25000.0, "customer": "Cristobal Puelle", "financial_status": "paid", "is_new": true}, {"id": 6735958311164, "created_at": "2026-01-23T15:17:56-03:00", "date": "2026-01-23", "total": 45000.0, "customer": "Jessica Tapia Flores", "financial_status": "paid", "is_new": true}, {"id": 6734732919036, "created_at": "2026-01-23T12:26:46-03:00", "date": "2026-01-23", "total": 44000.0, "customer": "CAMILA VILLALOBOS", "financial_status": "paid", "is_new": true}, {"id": 6733310361852, "created_at": "2026-01-22T19:34:00-03:00", "date": "2026-01-22", "total": 25000.0, "customer": "Tamara Atuan Olivares", "financial_status": "paid", "is_new": true}, {"id": 6733242106108, "created_at": "2026-01-22T18:38:27-03:00", "date": "2026-01-22", "total": 163170.0, "customer": "Javier R√≠os Gonz√°lez", "financial_status": "paid", "is_new": true}, {"id": 6732991332604, "created_at": "2026-01-22T15:38:11-03:00", "date": "2026-01-22", "total": 25000.0, "customer": "Quelly Iriarte Cobarrubia", "financial_status": "paid", "is_new": true}, {"id": 6732951060732, "created_at": "2026-01-22T15:10:12-03:00", "date": "2026-01-22", "total": 44000.0, "customer": "Mariel Figueroa Rodriguez", "financial_status": "paid", "is_new": true}, {"id": 6732861571324, "created_at": "2026-01-22T14:10:44-03:00", "date": "2026-01-22", "total": 100000.0, "customer": "Gladys Diaz Araya", "financial_status": "paid", "is_new": true}, {"id": 6732785582332, "created_at": "2026-01-22T13:33:15-03:00", "date": "2026-01-22", "total": 25000.0, "customer": "Elizabeth Guerrero Silva", "financial_status": "paid", "is_new": true}, {"id": 6732701008124, "created_at": "2026-01-22T12:40:45-03:00", "date": "2026-01-22", "total": 50000.0, "customer": "Maria Solange Barrueto Casanova", "financial_status": "paid", "is_new": true}, {"id": 6732625936636, "created_at": "2026-01-22T11:43:43-03:00", "date": "2026-01-22", "total": 52800.0, "customer": "JAVIERA KRAUSS", "financial_status": "paid", "is_new": true}, {"id": 6731484168444, "created_at": "2026-01-21T16:59:42-03:00", "date": "2026-01-21", "total": 500000.0, "customer": "Jocelyn Dominguez Gonzalez", "financial_status": "paid", "is_new": true}, {"id": 6731159437564, "created_at": "2026-01-21T13:18:13-03:00", "date": "2026-01-21", "total": 28500.0, "customer": "Paula Arancibia", "financial_status": "paid", "is_new": true}, {"id": 6730135961852, "created_at": "2026-01-20T20:02:02-03:00", "date": "2026-01-20", "total": 70000.0, "customer": "BETSABE AMESTICA", "financial_status": "paid", "is_new": true}, {"id": 6730106634492, "created_at": "2026-01-20T19:34:42-03:00", "date": "2026-01-20", "total": 56100.0, "customer": "Yuraima Rangel Santiago", "financial_status": "paid", "is_new": true}, {"id": 6730041196796, "created_at": "2026-01-20T18:40:55-03:00", "date": "2026-01-20", "total": 39900.0, "customer": "Cecilia Avallai Flores", "financial_status": "paid", "is_new": true}, {"id": 6729996206332, "created_at": "2026-01-20T18:07:25-03:00", "date": "2026-01-20", "total": 192000.0, "customer": "Melissa Jara", "financial_status": "paid", "is_new": true}, {"id": 6729920610556, "created_at": "2026-01-20T17:08:06-03:00", "date": "2026-01-20", "total": 151000.0, "customer": "Cecilia Avallai Flores", "financial_status": "paid", "is_new": true}, {"id": 6729822929148, "created_at": "2026-01-20T15:59:11-03:00", "date": "2026-01-20", "total": 70000.0, "customer": "Isidora Jhonson Rasse", "financial_status": "paid", "is_new": true}, {"id": 6729781805308, "created_at": "2026-01-20T15:29:54-03:00", "date": "2026-01-20", "total": 46100.0, "customer": "Valeria Poggi Aburto", "financial_status": "paid", "is_new": true}, {"id": 6729665642748, "created_at": "2026-01-20T14:09:52-03:00", "date": "2026-01-20", "total": 45000.0, "customer": "Macarena Cifuentes", "financial_status": "paid", "is_new": true}, {"id": 6729386655996, "created_at": "2026-01-20T10:46:25-03:00", "date": "2026-01-20", "total": 45000.0, "customer": "Daniela Castro Sepulveda", "financial_status": "paid", "is_new": true}, {"id": 6729273999612, "created_at": "2026-01-20T08:48:18-03:00", "date": "2026-01-20", "total": 590000.0, "customer": "Sofia Rodriguez", "financial_status": "paid", "is_new": true}, {"id": 6729265086716, "created_at": "2026-01-20T08:35:43-03:00", "date": "2026-01-20", "total": 25000.0, "customer": "Viviana Bouey Torres", "financial_status": "paid", "is_new": true}, {"id": 6728440316156, "created_at": "2026-01-19T19:03:49-03:00", "date": "2026-01-19", "total": 56100.0, "customer": "Graciela Olivares Calderon", "financial_status": "paid", "is_new": true}, {"id": 6728403419388, "created_at": "2026-01-19T18:35:19-03:00", "date": "2026-01-19", "total": 60000.0, "customer": "Carolina andrea R√≠os Vergara", "financial_status": "paid", "is_new": true}, {"id": 6728329593084, "created_at": "2026-01-19T17:43:16-03:00", "date": "2026-01-19", "total": 220000.0, "customer": "Marjurie Valencia Ortiz", "financial_status": "paid", "is_new": true}, {"id": 6728168145148, "created_at": "2026-01-19T15:58:48-03:00", "date": "2026-01-19", "total": 25000.0, "customer": "Victor Tapia", "financial_status": "paid", "is_new": true}, {"id": 6726797230332, "created_at": "2026-01-18T18:54:58-03:00", "date": "2026-01-18", "total": 105420.0, "customer": "KARINA ROCO ALARCON", "financial_status": "paid", "is_new": true}, {"id": 6724420239612, "created_at": "2026-01-17T13:10:26-03:00", "date": "2026-01-17", "total": 119200.0, "customer": "NAYARETH ESCOBAR", "financial_status": "paid", "is_new": true}, {"id": 6724321345788, "created_at": "2026-01-17T11:56:49-03:00", "date": "2026-01-17", "total": 30000.0, "customer": "SURI MARION YA√ëEZ SANHUEZA", "financial_status": "paid", "is_new": true}, {"id": 6724266328316, "created_at": "2026-01-17T11:10:05-03:00", "date": "2026-01-17", "total": 79200.0, "customer": "Jessica Lopez Reyes", "financial_status": "paid", "is_new": true}, {"id": 6724243718396, "created_at": "2026-01-17T10:51:27-03:00", "date": "2026-01-17", "total": 15000.0, "customer": "Daniela Sandoval", "financial_status": "paid", "is_new": true}, {"id": 6724241457404, "created_at": "2026-01-17T10:49:11-03:00", "date": "2026-01-17", "total": 88500.0, "customer": "MARTA HAYDEE BASSO BASSO", "financial_status": "paid", "is_new": true}, {"id": 6723316121852, "created_at": "2026-01-16T18:31:06-03:00", "date": "2026-01-16", "total": 52800.0, "customer": "Javiera Vergara Ahumada", "financial_status": "paid", "is_new": true}, {"id": 6723194749180, "created_at": "2026-01-16T17:09:53-03:00", "date": "2026-01-16", "total": 57600.0, "customer": "Javiera Andrea Fontecilla Pizarro", "financial_status": "paid", "is_new": true}, {"id": 6723137831164, "created_at": "2026-01-16T16:31:22-03:00", "date": "2026-01-16", "total": 1000000.0, "customer": "Yenny Gonzalez Tapia", "financial_status": "paid", "is_new": true}, {"id": 6723074654460, "created_at": "2026-01-16T15:51:08-03:00", "date": "2026-01-16", "total": 325000.0, "customer": "Constanza Ortiz Rey", "financial_status": "paid", "is_new": true}, {"id": 6722964750588, "created_at": "2026-01-16T14:40:00-03:00", "date": "2026-01-16", "total": 66600.0, "customer": "Jeanette Alvarez Pizarro", "financial_status": "paid", "is_new": true}, {"id": 6722959278332, "created_at": "2026-01-16T14:36:08-03:00", "date": "2026-01-16", "total": 56100.0, "customer": "Veronica Cortes", "financial_status": "paid", "is_new": true}, {"id": 6722620588284, "created_at": "2026-01-16T10:26:08-03:00", "date": "2026-01-16", "total": 50400.0, "customer": "Daniela Comigual", "financial_status": "paid", "is_new": true}, {"id": 6722493546748, "created_at": "2026-01-16T08:20:52-03:00", "date": "2026-01-16", "total": 48000.0, "customer": "diego meruane", "financial_status": "paid", "is_new": true}, {"id": 6721924497660, "created_at": "2026-01-15T21:36:16-03:00", "date": "2026-01-15", "total": 0.0, "customer": "Kyest Marketing", "financial_status": "paid", "is_new": true}, {"id": 6721568604412, "created_at": "2026-01-15T16:55:31-03:00", "date": "2026-01-15", "total": 52700.0, "customer": "Marga Mu√±oz Lopez", "financial_status": "paid", "is_new": true}, {"id": 6721414234364, "created_at": "2026-01-15T15:15:20-03:00", "date": "2026-01-15", "total": 22000.0, "customer": "BETSABE AMESTICA", "financial_status": "paid", "is_new": true}, {"id": 6721356235004, "created_at": "2026-01-15T14:35:53-03:00", "date": "2026-01-15", "total": 25000.0, "customer": "Maricela Vargas Moreno", "financial_status": "paid", "is_new": true}, {"id": 6721170899196, "created_at": "2026-01-15T12:28:19-03:00", "date": "2026-01-15", "total": 25000.0, "customer": "Francisca Gamboa ayala", "financial_status": "paid", "is_new": true}, {"id": 6721028161788, "created_at": "2026-01-15T10:29:43-03:00", "date": "2026-01-15", "total": 52800.0, "customer": "DANIELA CARRASCO GAJARDO", "financial_status": "paid", "is_new": true}, {"id": 6721024950524, "created_at": "2026-01-15T10:25:57-03:00", "date": "2026-01-15", "total": 20000.0, "customer": "Marjurie Valencia Ortiz", "financial_status": "paid", "is_new": true}, {"id": 6719520702716, "created_at": "2026-01-14T12:31:57-03:00", "date": "2026-01-14", "total": 56100.0, "customer": "Paloma Alejandra Ogalde Guerra", "financial_status": "paid", "is_new": true}, {"id": 6719451332860, "created_at": "2026-01-14T11:32:38-03:00", "date": "2026-01-14", "total": 33600.0, "customer": "Maria Paz Reyes Mena", "financial_status": "paid", "is_new": true}, {"id": 6719362367740, "created_at": "2026-01-14T10:07:14-03:00", "date": "2026-01-14", "total": 74800.0, "customer": "Catalina Gutierrez Pulgar", "financial_status": "paid", "is_new": true}, {"id": 6718620598524, "created_at": "2026-01-13T20:06:20-03:00", "date": "2026-01-13", "total": 400000.0, "customer": "Francisca Vergara", "financial_status": "paid", "is_new": true}, {"id": 6718566400252, "created_at": "2026-01-13T19:18:31-03:00", "date": "2026-01-13", "total": 400000.0, "customer": "Sofia Rodriguez", "financial_status": "paid", "is_new": true}, {"id": 6717808836860, "created_at": "2026-01-13T09:53:57-03:00", "date": "2026-01-13", "total": 116000.0, "customer": "katherine leiva labra", "financial_status": "paid", "is_new": true}, {"id": 6717028237564, "created_at": "2026-01-12T19:36:52-03:00", "date": "2026-01-12", "total": 25000.0, "customer": "Andrea Zamora", "financial_status": "paid", "is_new": true}, {"id": 6717026828540, "created_at": "2026-01-12T19:35:44-03:00", "date": "2026-01-12", "total": 240000.0, "customer": "Andrea Zamora", "financial_status": "paid", "is_new": true}, {"id": 6716968403196, "created_at": "2026-01-12T18:50:00-03:00", "date": "2026-01-12", "total": 25000.0, "customer": "Patricia del Carman Pareja Canales", "financial_status": "paid", "is_new": true}, {"id": 6716962898172, "created_at": "2026-01-12T18:45:14-03:00", "date": "2026-01-12", "total": 150000.0, "customer": "Joan Guajardo Meneses", "financial_status": "paid", "is_new": true}, {"id": 6716808397052, "created_at": "2026-01-12T16:43:32-03:00", "date": "2026-01-12", "total": 22000.0, "customer": "Jeanette Alvarez Pizarro", "financial_status": "paid", "is_new": true}, {"id": 6716736078076, "created_at": "2026-01-12T15:50:33-03:00", "date": "2026-01-12", "total": 380000.0, "customer": "yelitzi chaparro gomez", "financial_status": "paid", "is_new": true}, {"id": 6716705505532, "created_at": "2026-01-12T15:27:03-03:00", "date": "2026-01-12", "total": 22990.0, "customer": "Mercedes Patricia Cartes Perez", "financial_status": "paid", "is_new": true}, {"id": 6716690497788, "created_at": "2026-01-12T15:16:38-03:00", "date": "2026-01-12", "total": 56100.0, "customer": "Valentina Silva Hurtubia", "financial_status": "paid", "is_new": true}, {"id": 6716446441724, "created_at": "2026-01-12T12:18:02-03:00", "date": "2026-01-12", "total": 20000.0, "customer": "Karen Catalina Avallay Palacios", "financial_status": "paid", "is_new": true}, {"id": 6714960314620, "created_at": "2026-01-11T13:49:06-03:00", "date": "2026-01-11", "total": 0.0, "customer": "Cristobal Tejero", "financial_status": "paid", "is_new": true}, {"id": 6713314574588, "created_at": "2026-01-10T13:34:35-03:00", "date": "2026-01-10", "total": 25000.0, "customer": "Victoria Allende Rodriguez", "financial_status": "paid", "is_new": true}, {"id": 6713306317052, "created_at": "2026-01-10T13:29:22-03:00", "date": "2026-01-10", "total": 60000.0, "customer": "Susana Alejandra Molina", "financial_status": "paid", "is_new": true}, {"id": 6713251823868, "created_at": "2026-01-10T12:54:55-03:00", "date": "2026-01-10", "total": 516000.0, "customer": "Agusto Castillo", "financial_status": "paid", "is_new": true}, {"id": 6713215123708, "created_at": "2026-01-10T12:27:22-03:00", "date": "2026-01-10", "total": 74800.0, "customer": "Estefania Cruz Navez", "financial_status": "paid", "is_new": true}, {"id": 6713026740476, "created_at": "2026-01-10T09:59:31-03:00", "date": "2026-01-10", "total": 57000.0, "customer": "Rossana Castro Rodriguez", "financial_status": "paid", "is_new": true}, {"id": 6712979587324, "created_at": "2026-01-10T09:11:03-03:00", "date": "2026-01-10", "total": 57000.0, "customer": "V√≠ctor Lazo Parada", "financial_status": "paid", "is_new": true}, {"id": 6712295325948, "created_at": "2026-01-09T20:53:34-03:00", "date": "2026-01-09", "total": 25000.0, "customer": "Francisca Vergara", "financial_status": "paid", "is_new": true}, {"id": 6712193777916, "created_at": "2026-01-09T19:30:02-03:00", "date": "2026-01-09", "total": 10000.0, "customer": "Manuel Padilla", "financial_status": "paid", "is_new": true}, {"id": 6712047534332, "created_at": "2026-01-09T17:43:46-03:00", "date": "2026-01-09", "total": 105600.0, "customer": "Andrea Zoi Amira Gomez", "financial_status": "paid", "is_new": true}, {"id": 6711645438204, "created_at": "2026-01-09T13:44:10-03:00", "date": "2026-01-09", "total": 400000.0, "customer": "Claudia Lopez Vargas", "financial_status": "paid", "is_new": true}, {"id": 6711642882300, "created_at": "2026-01-09T13:42:16-03:00", "date": "2026-01-09", "total": 400000.0, "customer": "Jocelyn Dominguez Gonzalez", "financial_status": "paid", "is_new": true}, {"id": 6711554244860, "created_at": "2026-01-09T12:41:14-03:00", "date": "2026-01-09", "total": 47000.0, "customer": "Marta Torres Zamorano", "financial_status": "paid", "is_new": true}, {"id": 6710411624700, "created_at": "2026-01-08T18:06:33-03:00", "date": "2026-01-08", "total": 57300.0, "customer": "Sofia Menares", "financial_status": "paid", "is_new": true}, {"id": 6710301720828, "created_at": "2026-01-08T16:52:38-03:00", "date": "2026-01-08", "total": 150000.0, "customer": "Sofia Aros Gonzalez", "financial_status": "paid", "is_new": true}, {"id": 6710263906556, "created_at": "2026-01-08T16:25:35-03:00", "date": "2026-01-08", "total": 47000.0, "customer": "Nicole Castillo", "financial_status": "paid", "is_new": true}];
const dailyRevenue = [{"date": "2026-01-08", "revenue": 254300.0}, {"date": "2026-01-09", "revenue": 987600.0}, {"date": "2026-01-10", "revenue": 789800.0}, {"date": "2026-01-11", "revenue": 0.0}, {"date": "2026-01-12", "revenue": 941090.0}, {"date": "2026-01-13", "revenue": 916000.0}, {"date": "2026-01-14", "revenue": 164500.0}, {"date": "2026-01-15", "revenue": 197500.0}, {"date": "2026-01-16", "revenue": 1656500.0}, {"date": "2026-01-17", "revenue": 331900.0}, {"date": "2026-01-18", "revenue": 105420.0}, {"date": "2026-01-19", "revenue": 361100.0}, {"date": "2026-01-20", "revenue": 1330100.0}, {"date": "2026-01-21", "revenue": 528500.0}, {"date": "2026-01-22", "revenue": 484970.0}, {"date": "2026-01-23", "revenue": 480640.0}, {"date": "2026-01-24", "revenue": 670800.0}, {"date": "2026-01-26", "revenue": 865400.0}, {"date": "2026-01-27", "revenue": 171800.0}, {"date": "2026-01-28", "revenue": 304150.0}, {"date": "2026-01-29", "revenue": 554500.0}, {"date": "2026-01-30", "revenue": 4722750.0}, {"date": "2026-01-31", "revenue": 1184830.0}, {"date": "2026-02-02", "revenue": 305480.0}, {"date": "2026-02-03", "revenue": 595000.0}, {"date": "2026-02-04", "revenue": 349000.0}, {"date": "2026-02-05", "revenue": 551300.0}, {"date": "2026-02-06", "revenue": 572700.0}, {"date": "2026-02-07", "revenue": 74000.0}, {"date": "2026-02-09", "revenue": 828000.0}, {"date": "2026-02-10", "revenue": 2608400.0}, {"date": "2026-02-11", "revenue": 441900.0}, {"date": "2026-02-12", "revenue": 1500470.0}, {"date": "2026-02-13", "revenue": 1936990.0}, {"date": "2026-02-14", "revenue": 212900.0}, {"date": "2026-02-16", "revenue": 1275070.0}, {"date": "2026-02-17", "revenue": 1012600.0}, {"date": "2026-02-18", "revenue": 623500.0}, {"date": "2026-02-19", "revenue": 613500.0}, {"date": "2026-02-20", "revenue": 472000.0}, {"date": "2026-02-21", "revenue": 614000.0}, {"date": "2026-02-23", "revenue": 1173631.0}];
const monthlyStats = [{"month": "2026-01", "revenue": 18004150.0, "orders": 135, "new_customers": 135, "returning_customers": 0}, {"month": "2026-02", "revenue": 15760441.0, "orders": 115, "new_customers": 115, "returning_customers": 0}];
const topProducts = [{"name": "Sculpt Freeze Abdomen + espalda + 6 MAF + bonos", "revenue": 2000000.0, "units": 1, "pct": 5.9}, {"name": "Abono inicial tratamiento de Sculpt freeze abd+ espalda + 6 maf", "revenue": 1310000.0, "units": 1, "pct": 3.9}, {"name": "Brasile√±o | Depilaci√≥n l√°ser Alexandrita Pro de Candela", "revenue": 1132000.0, "units": 4, "pct": 3.3}, {"name": "Sculpt freeze abd+espalda+ 6 maf", "revenue": 970000.0, "units": 1, "pct": 2.9}, {"name": "Abono inicial Sculpt Freeze", "revenue": 800000.0, "units": 2, "pct": 2.4}, {"name": "RETOQUE de Brasile√±o |Depilaci√≥n l√°ser Alexandrita Pro de Candela", "revenue": 780000.0, "units": 7, "pct": 2.3}, {"name": "Evaluaci√≥n Para Sculpt Freeze", "revenue": 750000.0, "units": 30, "pct": 2.2}, {"name": "Abono Final tratamiento de Sculpt Freeze", "revenue": 700000.0, "units": 1, "pct": 2.1}, {"name": "MAF FACIAL MAS CORPORAL", "revenue": 605000.0, "units": 5, "pct": 1.8}, {"name": "Abono Final Sculpt freeze", "revenue": 590000.0, "units": 1, "pct": 1.7}];
const metaCampaigns = [{"id": "120240116854600556", "name": "New | AON - WEB - Ventas - Depilaci√≥n L√°ser audience | 10.02", "objective": "OUTCOME_SALES", "status": "ACTIVE", "spend": 85191.0, "impressions": 45817, "clicks": 1009, "ctr": 2.202239, "cpc": 84.43112, "roas": 5.745912}, {"id": "120239424325660556", "name": "AON - WSP - ENG - Depilaci√≥n Laser | 24.01 ‚Äì Copy", "objective": "OUTCOME_ENGAGEMENT", "status": "PAUSED", "spend": 0.0, "impressions": 0, "clicks": 0, "ctr": 0.0, "cpc": 0.0, "roas": 0}, {"id": "120239411260080556", "name": "AON - WEB - Ventas - Depilaci√≥n L√°ser audience | 25.01", "objective": "OUTCOME_SALES", "status": "PAUSED", "spend": 142924.0, "impressions": 56684, "clicks": 1038, "ctr": 1.831205, "cpc": 137.691715, "roas": 1.313285}, {"id": "120239387718660556", "name": "AON - WSP - ENG - Depilaci√≥n Laser | 24.01", "objective": "OUTCOME_ENGAGEMENT", "status": "PAUSED", "spend": 17838.0, "impressions": 12366, "clicks": 193, "ctr": 1.560731, "cpc": 92.42487, "roas": 0}, {"id": "120239353027460556", "name": "AON RMKT - WSP - Lead - Depilaci√≥n Laser | 13.01", "objective": "OUTCOME_LEADS", "status": "PAUSED", "spend": 2397.0, "impressions": 1292, "clicks": 15, "ctr": 1.160991, "cpc": 159.8, "roas": 0}, {"id": "120239307820480556", "name": "Sculpt Freeze | LL 1% | 22.01", "objective": "OUTCOME_LEADS", "status": "ACTIVE", "spend": 779036.0, "impressions": 130109, "clicks": 3585, "ctr": 2.755382, "cpc": 217.304324, "roas": 0.064182}, {"id": "120239257434410556", "name": "AON - WEB - Ventas - Depilaci√≥n L√°ser | 21.01", "objective": "OUTCOME_SALES", "status": "PAUSED", "spend": 7888.0, "impressions": 3627, "clicks": 50, "ctr": 1.37855, "cpc": 157.76, "roas": 41.113083}, {"id": "120238918349020556", "name": "AON - WSP - Lead - Depilaci√≥n Laser | 13.01", "objective": "OUTCOME_LEADS", "status": "ACTIVE", "spend": 661339.0, "impressions": 567122, "clicks": 6834, "ctr": 1.205032, "cpc": 96.771876, "roas": 0.791576}, {"id": "120238020493140556", "name": "CBO VENTAS NAVIDAD (FK)", "objective": "OUTCOME_SALES", "status": "PAUSED", "spend": 0.0, "impressions": 0, "clicks": 0, "ctr": 0.0, "cpc": 0.0, "roas": 0}, {"id": "120237935277010556", "name": "Retargeting - depilaci√≥n laser", "objective": "OUTCOME_SALES", "status": "PAUSED", "spend": 0.0, "impressions": 0, "clicks": 0, "ctr": 0.0, "cpc": 0.0, "roas": 0}, {"id": "120237934637670556", "name": "ESCALADA depilacion laser alexandrita", "objective": "OUTCOME_SALES", "status": "PAUSED", "spend": 0.0, "impressions": 0, "clicks": 0, "ctr": 0.0, "cpc": 0.0, "roas": 0}, {"id": "120237838994480556", "name": "PR0SPECCI√ìN depilaci√≥n laser", "objective": "OUTCOME_SALES", "status": "PAUSED", "spend": 0.0, "impressions": 0, "clicks": 0, "ctr": 0.0, "cpc": 0.0, "roas": 0}, {"id": "120237809429930556", "name": "PROSPECCI√ìN navidad 2025", "objective": "OUTCOME_SALES", "status": "PAUSED", "spend": 0.0, "impressions": 0, "clicks": 0, "ctr": 0.0, "cpc": 0.0, "roas": 0}, {"id": "120236408971580556", "name": "CBO  KYEST - HOMBRES", "objective": "OUTCOME_SALES", "status": "PAUSED", "spend": 0.0, "impressions": 0, "clicks": 0, "ctr": 0.0, "cpc": 0.0, "roas": 0}, {"id": "120236183578130556", "name": "CBO  BLACK FRIDAY 2025", "objective": "OUTCOME_SALES", "status": "PAUSED", "spend": 0.0, "impressions": 0, "clicks": 0, "ctr": 0.0, "cpc": 0.0, "roas": 0}, {"id": "120236033001880556", "name": "LEADS PARA BLACK KYEST 2025", "objective": "OUTCOME_LEADS", "status": "PAUSED", "spend": 0.0, "impressions": 0, "clicks": 0, "ctr": 0.0, "cpc": 0.0, "roas": 0}, {"id": "120235977157520556", "name": "campa√±a LEADS de Interacci√≥n PARA BLACK FRIDAY", "objective": "OUTCOME_ENGAGEMENT", "status": "PAUSED", "spend": 0.0, "impressions": 0, "clicks": 0, "ctr": 0.0, "cpc": 0.0, "roas": 0}, {"id": "120233200373640556", "name": "15.09.2025 CBO CYBER DAY KYEST - Hombre", "objective": "OUTCOME_SALES", "status": "PAUSED", "spend": 0.0, "impressions": 0, "clicks": 0, "ctr": 0.0, "cpc": 0.0, "roas": 0}, {"id": "120233064699520556", "name": "campa√±a LEADS de Interacci√≥n PARA CYBER - Copia", "objective": "OUTCOME_LEADS", "status": "PAUSED", "spend": 0.0, "impressions": 0, "clicks": 0, "ctr": 0.0, "cpc": 0.0, "roas": 0}, {"id": "120232651821670556", "name": "CBO KYEST DEPILACION LASER mujer cyber ok", "objective": "OUTCOME_SALES", "status": "PAUSED", "spend": 0.0, "impressions": 0, "clicks": 0, "ctr": 0.0, "cpc": 0.0, "roas": 0}, {"id": "120232651821660556", "name": "AON - WEB - Venta - Depilacion | React. 04.02", "objective": "OUTCOME_SALES", "status": "PAUSED", "spend": 16839.0, "impressions": 13138, "clicks": 250, "ctr": 1.902877, "cpc": 67.356, "roas": 0}, {"id": "120232630182390556", "name": "15.09.2025 CBO CYBER DAY KYEST mujer", "objective": "OUTCOME_SALES", "status": "PAUSED", "spend": 0.0, "impressions": 0, "clicks": 0, "ctr": 0.0, "cpc": 0.0, "roas": 0}, {"id": "120232559650660556", "name": "Campa√±a Campa√±a de clientes potenciales para CYBER  13/9/2025 Campa√±a", "objective": "OUTCOME_LEADS", "status": "PAUSED", "spend": 0.0, "impressions": 0, "clicks": 0, "ctr": 0.0, "cpc": 0.0, "roas": 0}, {"id": "120232278143960556", "name": "campa√±a LEADS de Interacci√≥n PARA CYBER", "objective": "OUTCOME_ENGAGEMENT", "status": "PAUSED", "spend": 0.0, "impressions": 0, "clicks": 0, "ctr": 0.0, "cpc": 0.0, "roas": 0}, {"id": "120230910338890556", "name": "Ventas  shopy depilaci√≥n l√°ser  Agosto", "objective": "OUTCOME_SALES", "status": "PAUSED", "spend": 0.0, "impressions": 0, "clicks": 0, "ctr": 0.0, "cpc": 0.0, "roas": 0}];
const metaDaily = [{"date": "2026-01-24", "spend": 101368.0, "impressions": 37733, "clicks": 492, "ctr": 1.303898}, {"date": "2026-01-25", "spend": 82952.0, "impressions": 30267, "clicks": 423, "ctr": 1.397562}, {"date": "2026-01-26", "spend": 89955.0, "impressions": 35323, "clicks": 504, "ctr": 1.426832}, {"date": "2026-01-27", "spend": 60398.0, "impressions": 25948, "clicks": 489, "ctr": 1.884538}, {"date": "2026-01-28", "spend": 83594.0, "impressions": 37816, "clicks": 548, "ctr": 1.449122}, {"date": "2026-01-29", "spend": 42977.0, "impressions": 17198, "clicks": 327, "ctr": 1.901384}, {"date": "2026-01-30", "spend": 36388.0, "impressions": 17720, "clicks": 248, "ctr": 1.399549}, {"date": "2026-01-31", "spend": 29682.0, "impressions": 17515, "clicks": 215, "ctr": 1.227519}, {"date": "2026-02-01", "spend": 31379.0, "impressions": 22274, "clicks": 276, "ctr": 1.239113}, {"date": "2026-02-02", "spend": 56004.0, "impressions": 31665, "clicks": 421, "ctr": 1.329544}, {"date": "2026-02-03", "spend": 56576.0, "impressions": 30544, "clicks": 409, "ctr": 1.339052}, {"date": "2026-02-04", "spend": 75905.0, "impressions": 40203, "clicks": 610, "ctr": 1.5173}, {"date": "2026-02-05", "spend": 60567.0, "impressions": 29726, "clicks": 416, "ctr": 1.399448}, {"date": "2026-02-06", "spend": 61018.0, "impressions": 27673, "clicks": 405, "ctr": 1.46352}, {"date": "2026-02-07", "spend": 68334.0, "impressions": 32534, "clicks": 647, "ctr": 1.988689}, {"date": "2026-02-08", "spend": 79195.0, "impressions": 36556, "clicks": 619, "ctr": 1.693292}, {"date": "2026-02-09", "spend": 82677.0, "impressions": 42653, "clicks": 627, "ctr": 1.470002}, {"date": "2026-02-10", "spend": 82228.0, "impressions": 39380, "clicks": 756, "ctr": 1.919756}, {"date": "2026-02-11", "spend": 82766.0, "impressions": 36983, "clicks": 785, "ctr": 2.122597}, {"date": "2026-02-12", "spend": 77025.0, "impressions": 33226, "clicks": 704, "ctr": 2.118823}, {"date": "2026-02-13", "spend": 62684.0, "impressions": 31619, "clicks": 530, "ctr": 1.676207}, {"date": "2026-02-14", "spend": 75295.0, "impressions": 39800, "clicks": 735, "ctr": 1.846734}, {"date": "2026-02-15", "spend": 82243.0, "impressions": 35956, "clicks": 796, "ctr": 2.213817}, {"date": "2026-02-16", "spend": 88418.0, "impressions": 45659, "clicks": 723, "ctr": 1.583478}, {"date": "2026-02-17", "spend": 79520.0, "impressions": 39543, "clicks": 742, "ctr": 1.876438}];
const metaAds = [{"id": "120240116854640556", "name": "Video - Cuantas veces Sin sissy al principio 1 | 28.01", "status": "ACTIVE", "thumbnail_url": "https://scontent-ord5-3.xx.fbcdn.net/v/t15.5256-10/622819583_903073905597042_4798329269040195453_n.jpg?_nc_cat=106&ccb=1-7&_nc_eui2=AeEL_xFtO9p558RDBMC2AeyxCmW3Z7TBxtAKZbdntMHG0Bk0LSuehPNghp1h_fiWpPQ&_nc_ohc=qqxGTQMKtoEQ7kNvwEEZoMz&_nc_oc=AdnCAcTLYT-Ne7nJhhNYCsuuQa7nBTkPW7KEMTaYKShPrO_ebVnnM5rE-g3sGpXhXAI&_nc_zt=23&_nc_ht=scontent-ord5-3.xx&edm=AOgd6ZUEAAAA&_nc_gid=6l3_lSqemp4-5kzSFRfu0Q&_nc_tpa=Q5bMBQFWzOqnvQ2u-MQarH_bjnQvaZUydhTmnSZHqtVCqGx_9cBRCeznUOmkhTlWGssc-k-4zYLoob1KFg&stp=c0.5000x0.5000f_dst-emg0_p64x64_q75_tt6&ur=5fad0e&_nc_sid=58080a&oh=00_AfvfF34QXJCZugISlyQdVRJuefZTzFw9OD4j0abf9Lsw_A&oe=69A2725E", "spend": 788.0, "impressions": 301, "clicks": 36, "ctr": 11.960133, "cpc": 21.888889}, {"id": "120240116854620556", "name": "Video - Romi 1  | 28.01", "status": "ACTIVE", "thumbnail_url": "https://scontent-ord5-3.xx.fbcdn.net/v/t15.5256-10/624734432_4130031020581633_4446984895228994852_n.jpg?_nc_cat=107&ccb=1-7&_nc_eui2=AeE3f_5wIzQBS9DXylXw-cJ2SjGM84XndptKMYzzhed2m7BMutMDODH-1ms2_d_P2Jg&_nc_ohc=CxEFjFvNJA0Q7kNvwFm086p&_nc_oc=Adl492RUmKlni6e77IS_7r4eAsj7vs3AdtaSK7hOT6LiBze45at9SQ7Ko1UlA6iowhM&_nc_zt=23&_nc_ht=scontent-ord5-3.xx&edm=AOgd6ZUEAAAA&_nc_gid=6l3_lSqemp4-5kzSFRfu0Q&_nc_tpa=Q5bMBQGCRg0ycaA949QhUgLDdtyXIpcVRkm4UZcA5ZCah0837Jy_de5FkE2P7QyGpZwjvWrRjuze4R0DwA&stp=c0.5000x0.5000f_dst-emg0_p64x64_q75_tt6&ur=5fad0e&_nc_sid=58080a&oh=00_AfuF3T0xL_zGxmvLE83OFnw6b4zsv6fs7R-9DdYH5mkv_A&oe=69A26042", "spend": 1396.0, "impressions": 799, "clicks": 66, "ctr": 8.260325, "cpc": 21.151515}, {"id": "120240116854560556", "name": "Video - Romi 2 | Si llegaste hasta aqu√≠  | 28.01", "status": "ACTIVE", "thumbnail_url": "https://scontent-ord5-2.xx.fbcdn.net/v/t15.5256-10/624280794_1416121443246365_8281690433045619743_n.jpg?_nc_cat=104&ccb=1-7&_nc_eui2=AeGvKey5GtJDFPqYMuRdWWdEGg6ACYfjFVYaDoAJh-MVVtZUEl92UalCqODDtXKlbr8&_nc_ohc=XsvaQnSwa-AQ7kNvwFldLLJ&_nc_oc=AdmuFxKNhcz09ysbquoKtM1DLeTns-NJ2UaEVV8_ZdSxCyC8YU7xnRKpHeH6Wh6VccM&_nc_zt=23&_nc_ht=scontent-ord5-2.xx&edm=AOgd6ZUEAAAA&_nc_gid=6l3_lSqemp4-5kzSFRfu0Q&_nc_tpa=Q5bMBQEy5Vhzh51lKeoAeUOmRfarKVFAha8-IBGS-ZOQgt5yLEOv1TSst0T-F0_ANI35T078uWVw70kj1w&stp=c0.5000x0.5000f_dst-emg0_p64x64_q75_tt6&ur=5fad0e&_nc_sid=58080a&oh=00_AfsPg81wzD0vzJUPF9nFy8DJzNAkQGQyOkbYWcuTFxETxQ&oe=69A28AB7", "spend": 861.0, "impressions": 491, "clicks": 31, "ctr": 6.313646, "cpc": 27.774194}, {"id": "120240621278750556", "name": "Video | Testimonio React", "status": "ACTIVE", "thumbnail_url": "https://scontent-ord5-2.xx.fbcdn.net/v/t15.5256-10/638320508_1736502967310593_7248716817058217949_n.jpg?_nc_cat=105&ccb=1-7&_nc_eui2=AeHySQU-JrNpdWC70AkNkL8VjHsIw_QrasOMewjD9Ctqw7Z8oaXRM7Gy0jLWzNqTRsY&_nc_ohc=fFYXbhrQxjwQ7kNvwFhs06F&_nc_oc=Adlmj4fpD9rMEaMafO4IqJehpF9h-fheZmLYan-PAwv23Pz9HLR_9HXggCg0C6LWn5Y&_nc_zt=23&_nc_ht=scontent-ord5-2.xx&edm=AOgd6ZUEAAAA&_nc_gid=6l3_lSqemp4-5kzSFRfu0Q&_nc_tpa=Q5bMBQFAL7NKJZJNXqGr3QcxF34hfk2Odt0gdRL1XYvD-4YZmBYzoHlaxnPGE6-kGvi9S4_zJwo0XJ8LEA&stp=c0.5000x0.5000f_dst-emg0_p64x64_q75_tt6&ur=5fad0e&_nc_sid=58080a&oh=00_AfsSdSXuuEVsN7ZcPMG8dDcJXm7-N_Sx0W6yCGWa7Yy9JQ&oe=69A29038", "spend": 4653.0, "impressions": 2792, "clicks": 72, "ctr": 2.578797, "cpc": 64.625}, {"id": "120240620163460556", "name": "Video | Confianza Ro y Sissy | 20.02", "status": "ACTIVE", "thumbnail_url": "https://scontent.fscl20-1.fna.fbcdn.net/v/t15.5256-10/638322058_1672250803946845_3674366485011311213_n.jpg?_nc_cat=109&ccb=1-7&_nc_ohc=4QD3TT5tFFUQ7kNvwG1ELyT&_nc_oc=Adk7CX5m7ikqn57QmkfTGpU17RT1-eO4xdQez3QkKEOhYSlQnp_6ampqmsEeEb5W1v8&_nc_ad=z-m&_nc_cid=1522&_nc_zt=23&_nc_ht=scontent.fscl20-1.fna&_nc_gid=e7B0aUWlKcHDF50vZC71-w&stp=c0.5000x0.5000f_dst-emg0_p64x64_q75_tt6&ur=5fad0e&_nc_sid=58080a&oh=00_Afst8eSxbAZWIswq8c92ChajeC0QYIyunyv60r2_nIE1OQ&oe=69A0D04D", "spend": 245.0, "impressions": 209, "clicks": 4, "ctr": 1.913876, "cpc": 61.25}, {"id": "120240116854580556", "name": "2025.06.24 Reel Org 18/06 CTA Enviar Mensaje", "status": "ACTIVE", "thumbnail_url": "https://scontent-ord5-2.xx.fbcdn.net/v/t51.71878-10/491440278_1316405219469717_2199676689403529317_n.jpg?_nc_cat=102&ccb=1-7&_nc_eui2=AeFxfbkdGV0Y8AF6fAJ_aIeeW65wALD2z0lbrnAAsPbPSXCLta_Fu3I-iBuZSL9bXjA&_nc_ohc=UDhbVLlp1lUQ7kNvwE1EUU-&_nc_oc=AdnpVUH8RKxUAVAbiXT6CqEUfaXizmI4LGIFQWQ2Y7hwUCyxvcPrRE1EIwqORL1hkcw&_nc_zt=23&_nc_ht=scontent-ord5-2.xx&edm=AOgd6ZUEAAAA&_nc_gid=6l3_lSqemp4-5kzSFRfu0Q&_nc_tpa=Q5bMBQGOffs6WusLY2f4clpDSNjekFpKMxItyQyPPf28NeQUX6UJbX20VuWfhG1H1-Whx-bbs2qanoufyg&stp=c0.5000x0.5000f_dst-emg0_p64x64_q75_tt6&ur=33e7a6&_nc_sid=58080a&oh=00_AfscImienLzyToPYuYGkYRVGRKac5hAbUg2edPun4TTMzg&oe=69A27D06", "spend": 2830.0, "impressions": 928, "clicks": 17, "ctr": 1.831897, "cpc": 166.470588}, {"id": "120240359269920556", "name": "No lo pienses axilas Cliente nuevo Clara | 16.02", "status": "PAUSED", "thumbnail_url": "https://scontent-ord5-3.xx.fbcdn.net/v/t45.1600-4/634031720_10162945163916379_3032036491975315162_n.jpg?_nc_cat=107&ccb=1-7&_nc_eui2=AeFPK44HqjDtFC0zmORCE242mjuK6pzKJ8OaO4rqnMonwwwVZYyidMDfTX1zRZLPSRc&_nc_ohc=0Uec472zyyQQ7kNvwFk_c68&_nc_oc=Adk4d-gSksRAPbCjfBnsuVH5tGcLq8L9XJqZWPaSRmCWa68B01vdzpw6UtFk4Kk33DQ&_nc_zt=1&_nc_ht=scontent-ord5-3.xx&edm=AOgd6ZUEAAAA&_nc_gid=6l3_lSqemp4-5kzSFRfu0Q&_nc_tpa=Q5bMBQGQ5iqFSAbNnGC9xp5K3Fpk0IvPdwE3WlylGbZjWGJqnCDDALbPaVz5wHPMHnfTIPkrYPG1pm6X0w&stp=c0.5000x0.5000f_dst-emg0_p64x64_q75_tt6&ur=52f3c4&_nc_sid=58080a&oh=00_AfuH24nelpObrA3nKiFV4E4YjDmNh8VJVS3BiacZe2MxXQ&oe=69A26A5D", "spend": 1211.0, "impressions": 500, "clicks": 7, "ctr": 1.4, "cpc": 173.0}, {"id": "120240620163390556", "name": "Video | Vello no es problema| 23.01 ‚Äì Video nuevo", "status": "ACTIVE", "thumbnail_url": "https://scontent-ord5-2.xx.fbcdn.net/v/t15.5256-10/619200064_887988106978063_198552182545491293_n.jpg?_nc_cat=104&ccb=1-7&_nc_eui2=AeFBg5q8JboQO6fVwxvFaFo-hXfhbn_8uK2Fd-Fuf_y4racpJLs1Dz9pXmfw80MTcdM&_nc_ohc=BZc9W3uvCTEQ7kNvwEtYTVL&_nc_oc=AdmH830ZlSqOIqgDaBPnEz8Tk_JgAdXKDQI1GRcvGuYYFhLkQ4HkRZqto8CQmWI4S9c&_nc_zt=23&_nc_ht=scontent-ord5-2.xx&edm=AOgd6ZUEAAAA&_nc_gid=6l3_lSqemp4-5kzSFRfu0Q&_nc_tpa=Q5bMBQEtoutaKvihZ_QrSh04VesWCCUOpoZmEpy0xdyNs2_mgaRnGSBmgWHaA3hYob1ZnblDe7UjadMKOg&stp=c0.5000x0.5000f_dst-emg0_p64x64_q75_tt6&ur=5fad0e&_nc_sid=58080a&oh=00_AfsbUUaS0igstQVRmpw7JsxAE9Xrok0grs3qFECuw0Whyg&oe=69A26EEA", "spend": 609.0, "impressions": 618, "clicks": 8, "ctr": 1.294498, "cpc": 76.125}, {"id": "120240620163340556", "name": "Video | 3 Ventajas Alexandrita Pro| 13.01", "status": "ACTIVE", "thumbnail_url": "https://scontent-ord5-3.xx.fbcdn.net/v/t15.13418-10/525568402_1169257701705555_7587565034634921556_n.jpg?_nc_cat=107&ccb=1-7&_nc_eui2=AeEHVLzrTMUe0BMkUcEYHXinq3oYISvtnFKrehghK-2cUmGPtIB96KGpCCyBwikqBcg&_nc_ohc=5QAWsdeLNbAQ7kNvwFMPGA-&_nc_oc=Adk_nGfTmS6JBk1ZfiQhF5_ramgSSuuV_BLXCDi0t0V_vJDH3U93p9XzMA0QskvcMDM&_nc_zt=23&_nc_ht=scontent-ord5-3.xx&edm=AOgd6ZUEAAAA&_nc_gid=6l3_lSqemp4-5kzSFRfu0Q&_nc_tpa=Q5bMBQEy5CBbmnjvstO0C0HJuRAdncBkM7xZkA_DN9bT_8BraklB-dCt3APnW432Im2MbdkWzOJevxaWmg&stp=c0.5000x0.5000f_dst-emg0_p64x64_q75_tt6&ur=aaa768&_nc_sid=58080a&oh=00_AfvulYzwWsPub9MESJXXnrtN-Il8Ww2y5WHardG1avwAPA&oe=69A26F72", "spend": 303.0, "impressions": 163, "clicks": 2, "ctr": 1.226994, "cpc": 151.5}, {"id": "120240620248770556", "name": "Video | Confianza Ro y Sissy | 20.02", "status": "ACTIVE", "thumbnail_url": "https://scontent.fscl35-1.fna.fbcdn.net/v/t15.5256-10/637013046_936673085550186_3125368830032873412_n.jpg?_nc_cat=102&ccb=1-7&_nc_ohc=kxRvaUvCKhwQ7kNvwGQyU1I&_nc_oc=AdnSp1_PZLGFEkwjw1xFM_9unydBAq346IlXwFDQ-NXgfu5c6acsKOZIVpqvRTz6rW0&_nc_ad=z-m&_nc_cid=1522&_nc_zt=23&_nc_ht=scontent.fscl35-1.fna&_nc_gid=t_30k8MqE8dtttbomRV03g&stp=c0.5000x0.5000f_dst-emg0_p64x64_q75_tt6&ur=5fad0e&_nc_sid=58080a&oh=00_AftAb4Uy_ZGOMl1kcFsnKiKxVVe7FmcbeIu0Bewh99O76g&oe=69A0CFC9", "spend": 119.0, "impressions": 85, "clicks": 1, "ctr": 1.176471, "cpc": 119.0}];

const ga4Channels = [
  { channel: "Direct", sessions: 1089, users: 797, newUsers: 798, conversions: 25, revenue: 3892750 },
  { channel: "Organic Search", sessions: 1131, users: 690, newUsers: 678, conversions: 5, revenue: 642000 },
  { channel: "Paid Social", sessions: 2875, users: 2249, newUsers: 2219, conversions: 1, revenue: 50000 },
  { channel: "Organic Social", sessions: 1052, users: 912, newUsers: 889, conversions: 5, revenue: 615090 },
  { channel: "Paid Other", sessions: 648, users: 351, newUsers: 325, conversions: 0, revenue: 0 },
  { channel: "Referral", sessions: 187, users: 107, newUsers: 100, conversions: 0, revenue: 0 },
  { channel: "Email", sessions: 29, users: 12, newUsers: 10, conversions: 0, revenue: 0 }
];

// ===== UTILITIES =====
function clp(n) {
  if (n === null || n === undefined || isNaN(n)) return '$0';
  return '$' + Math.round(n).toLocaleString('es-CL').replace(/,/g, '.');
}
function num(n) {
  if (n === null || n === undefined) return '0';
  return Math.round(n).toLocaleString('es-CL').replace(/,/g, '.');
}
function pct(n) { return (n || 0).toFixed(2) + '%'; }
function roas(n) { return (n || 0).toFixed(2) + 'x'; }

// ===== DATE RANGE STATE =====
let currentStartDate = null;
let currentEndDate = null;

function parseDate(s) {
  return new Date(s.substring(0,10));
}

function isInRange(dateStr) {
  if (!currentStartDate || !currentEndDate) return true;
  const d = parseDate(dateStr);
  return d >= currentStartDate && d <= currentEndDate;
}

// ===== FILTER DATA =====
function getFilteredOrders() {
  if (!currentStartDate || !currentEndDate) return shopifyOrders;
  return shopifyOrders.filter(o => {
    const d = parseDate(o.created_at);
    return d >= currentStartDate && d <= currentEndDate;
  });
}

function getFilteredDailyRevenue() {
  return dailyRevenue.filter(d => isInRange(d.date));
}

function getFilteredMetaDaily() {
  return metaDaily.filter(d => isInRange(d.date));
}

function getFilteredMetaSpend() {
  // For filtered meta spend, use daily data if possible
  const filtered = getFilteredMetaDaily();
  if (filtered.length > 0) {
    return filtered.reduce((s, d) => s + d.spend, 0);
  }
  // Otherwise use campaign total
  return metaCampaigns.reduce((s, c) => s + c.spend, 0);
}

// ===== CHART INSTANCES =====
const charts = {};

function createOrUpdate(id, config) {
  const canvas = document.getElementById(id);
  if (!canvas) return null;
  if (charts[id]) {
    charts[id].destroy();
  }
  charts[id] = new Chart(canvas, config);
  return charts[id];
}

const chartDefaults = {
  responsive: true,
  maintainAspectRatio: false,
  animation: { duration: 600 },
  plugins: {
    legend: { labels: { color: '#94A3B8', font: { family: 'Inter', size: 12 }, boxWidth: 12 } },
    tooltip: {
      backgroundColor: '#1E2D4A',
      titleColor: '#F1F5F9',
      bodyColor: '#94A3B8',
      borderColor: '#243452',
      borderWidth: 1,
      padding: 10,
      titleFont: { family: 'Inter', size: 12 },
      bodyFont: { family: 'Inter', size: 12 }
    }
  },
  scales: {
    x: { grid: { color: 'rgba(255,255,255,0.04)' }, ticks: { color: '#475569', font: { family: 'Inter', size: 11 } } },
    y: { grid: { color: 'rgba(255,255,255,0.04)' }, ticks: { color: '#475569', font: { family: 'Inter', size: 11 } } }
  }
};

// ===== UPDATE OVERVIEW =====
function updateOverview() {
  const orders = getFilteredOrders();
  const revenue = orders.reduce((s, o) => s + o.total, 0);
  const ordersCount = orders.length;
  const aov = ordersCount > 0 ? revenue / ordersCount : 0;
  const metaSpend = getFilteredMetaSpend();
  const realRoas = metaSpend > 0 ? revenue / metaSpend : 0;
  const newCust = orders.filter(o => o.is_new).length;

  document.getElementById('ov-revenue').textContent = clp(revenue);
  document.getElementById('ov-orders').textContent = num(ordersCount);
  document.getElementById('ov-aov').textContent = clp(aov);
  document.getElementById('ov-spend').textContent = clp(metaSpend);
  document.getElementById('ov-roas').textContent = roas(realRoas);
  document.getElementById('ov-newcust').textContent = num(newCust);

  // Daily revenue chart
  const daily = getFilteredDailyRevenue();
  createOrUpdate('chartDailyRevenue', {
    type: 'line',
    data: {
      labels: daily.map(d => d.date.substring(5)),
      datasets: [{
        label: 'Revenue CLP',
        data: daily.map(d => d.revenue),
        borderColor: '#3B82F6',
        backgroundColor: 'rgba(59,130,246,0.08)',
        borderWidth: 2,
        fill: true,
        tension: 0.3,
        pointRadius: 3,
        pointBackgroundColor: '#3B82F6'
      }]
    },
    options: {
      ...chartDefaults,
      plugins: {
        ...chartDefaults.plugins,
        tooltip: {
          ...chartDefaults.plugins.tooltip,
          callbacks: { label: ctx => ' ' + clp(ctx.raw) }
        }
      },
      scales: {
        x: { ...chartDefaults.scales.x, ticks: { ...chartDefaults.scales.x.ticks, maxTicksLimit: 12 } },
        y: { ...chartDefaults.scales.y, ticks: { ...chartDefaults.scales.y.ticks, callback: v => clp(v) } }
      }
    }
  });

  // Channels donut
  createOrUpdate('chartChannels', {
    type: 'doughnut',
    data: {
      labels: ga4Channels.map(c => c.channel),
      datasets: [{
        data: ga4Channels.map(c => c.sessions),
        backgroundColor: ['#3B82F6','#10B981','#8B5CF6','#F59E0B','#EF4444','#06B6D4','#F97316'],
        borderColor: '#0F1629',
        borderWidth: 2
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      animation: { duration: 600 },
      plugins: {
        legend: { position: 'right', labels: { color: '#94A3B8', font: { family: 'Inter', size: 11 }, boxWidth: 10, padding: 10 } },
        tooltip: {
          ...chartDefaults.plugins.tooltip,
          callbacks: { label: ctx => ' ' + ctx.label + ': ' + num(ctx.raw) + ' sesiones' }
        }
      }
    }
  });

  // Revenue vs Spend
  const metaDates = getFilteredMetaDaily();
  const revByDate = {};
  daily.forEach(d => { revByDate[d.date] = d.revenue; });
  const combinedDates = [...new Set([...daily.map(d=>d.date), ...metaDates.map(d=>d.date)])].sort();
  createOrUpdate('chartRevenueVsSpend', {
    type: 'bar',
    data: {
      labels: combinedDates.map(d => d.substring(5)),
      datasets: [
        {
          label: 'Revenue',
          data: combinedDates.map(d => revByDate[d] || 0),
          backgroundColor: 'rgba(59,130,246,0.7)',
          borderRadius: 3,
          yAxisID: 'y'
        },
        {
          label: 'Gasto Meta',
          data: combinedDates.map(d => { const m = metaDates.find(x=>x.date===d); return m ? m.spend : 0; }),
          backgroundColor: 'rgba(239,68,68,0.6)',
          borderRadius: 3,
          yAxisID: 'y2'
        }
      ]
    },
    options: {
      ...chartDefaults,
      plugins: {
        ...chartDefaults.plugins,
        tooltip: { ...chartDefaults.plugins.tooltip, callbacks: { label: ctx => ' ' + ctx.dataset.label + ': ' + clp(ctx.raw) } }
      },
      scales: {
        x: { ...chartDefaults.scales.x, ticks: { ...chartDefaults.scales.x.ticks, maxTicksLimit: 10 } },
        y: { ...chartDefaults.scales.y, position: 'left', ticks: { ...chartDefaults.scales.y.ticks, callback: v => clp(v) } },
        y2: { ...chartDefaults.scales.y, position: 'right', grid: { display: false }, ticks: { ...chartDefaults.scales.y.ticks, callback: v => clp(v) } }
      }
    }
  });

  // New vs Returning
  createOrUpdate('chartNewVsReturning', {
    type: 'bar',
    data: {
      labels: monthlyStats.map(m => m.month),
      datasets: [
        { label: 'Nuevos', data: monthlyStats.map(m => m.new_customers), backgroundColor: 'rgba(16,185,129,0.7)', borderRadius: 4 },
        { label: 'Recurrentes', data: monthlyStats.map(m => m.returning_customers), backgroundColor: 'rgba(59,130,246,0.7)', borderRadius: 4 }
      ]
    },
    options: {
      ...chartDefaults,
      scales: {
        x: chartDefaults.scales.x,
        y: { ...chartDefaults.scales.y, stacked: true }
      }
    }
  });
}

// ===== UPDATE META ADS =====
function updateMetaAds() {
  const totalSpend = metaCampaigns.reduce((s,c) => s+c.spend, 0);
  const totalImpressions = metaCampaigns.reduce((s,c) => s+c.impressions, 0);
  const totalClicks = metaCampaigns.reduce((s,c) => s+c.clicks, 0);
  const avgCtr = totalImpressions > 0 ? (totalClicks/totalImpressions*100) : 0;
  const avgCpc = totalClicks > 0 ? totalSpend/totalClicks : 0;
  const weightedRoas = metaCampaigns.filter(c=>c.spend>0).reduce((s,c) => s + c.roas*c.spend, 0) / (totalSpend||1);

  document.getElementById('meta-spend').textContent = clp(totalSpend);
  document.getElementById('meta-impressions').textContent = num(totalImpressions);
  document.getElementById('meta-clicks').textContent = num(totalClicks);
  document.getElementById('meta-ctr').textContent = pct(avgCtr);
  document.getElementById('meta-cpc').textContent = clp(avgCpc);
  document.getElementById('meta-roas-pixel').textContent = roas(weightedRoas);

  // Real ROAS comparison
  const orders = getFilteredOrders();
  const shopifyRev = orders.reduce((s,o) => s+o.total, 0);
  const realRoasVal = totalSpend > 0 ? shopifyRev/totalSpend : 0;
  document.getElementById('real-roas-compare').textContent = roas(realRoasVal);
  document.getElementById('meta-roas-compare').textContent = roas(weightedRoas);

  // Campaigns table
  const sorted = [...metaCampaigns].sort((a,b) => b.spend - a.spend);
  const tbody = document.getElementById('campaignsBody');
  tbody.innerHTML = sorted.map(c => {
    const objBadge = { 'OUTCOME_SALES': 'badge-blue', 'OUTCOME_LEADS': 'badge-purple', 'OUTCOME_ENGAGEMENT': 'badge-orange' }[c.objective] || 'badge-gray';
    const objLabel = { 'OUTCOME_SALES': 'Ventas', 'OUTCOME_LEADS': 'Leads', 'OUTCOME_ENGAGEMENT': 'Engagement' }[c.objective] || c.objective;
    const statusBadge = c.status === 'ACTIVE' ? 'badge-green' : 'badge-gray';
    const roasColor = c.roas >= 3 ? 'color:var(--green)' : c.roas >= 1 ? 'color:var(--yellow)' : c.roas > 0 ? 'color:var(--red)' : 'color:var(--text-muted)';
    return `<tr>
      <td style="max-width:260px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap">${c.name}</td>
      <td><span class="badge ${objBadge}">${objLabel}</span></td>
      <td>${clp(c.spend)}</td>
      <td>${num(c.impressions)}</td>
      <td>${num(c.clicks)}</td>
      <td>${pct(c.ctr)}</td>
      <td>${clp(c.cpc)}</td>
      <td style="${roasColor}">${c.roas > 0 ? roas(c.roas) : '‚Äî'}</td>
      <td><span class="badge ${statusBadge}">${c.status}</span></td>
    </tr>`;
  }).join('');

  // Daily spend chart
  createOrUpdate('chartMetaDaily', {
    type: 'line',
    data: {
      labels: metaDaily.map(d => d.date.substring(5)),
      datasets: [{
        label: 'Gasto Diario',
        data: metaDaily.map(d => d.spend),
        borderColor: '#EF4444',
        backgroundColor: 'rgba(239,68,68,0.08)',
        borderWidth: 2,
        fill: true,
        tension: 0.3,
        pointRadius: 3
      }]
    },
    options: {
      ...chartDefaults,
      plugins: { ...chartDefaults.plugins, tooltip: { ...chartDefaults.plugins.tooltip, callbacks: { label: ctx => ' ' + clp(ctx.raw) } } },
      scales: {
        x: chartDefaults.scales.x,
        y: { ...chartDefaults.scales.y, ticks: { ...chartDefaults.scales.y.ticks, callback: v => clp(v) } }
      }
    }
  });

  // CTR by Campaign
  const top10 = [...metaCampaigns].filter(c => c.impressions > 0).sort((a,b) => b.ctr-a.ctr).slice(0,10);
  createOrUpdate('chartCampaignCTR', {
    type: 'bar',
    data: {
      labels: top10.map(c => c.name.length > 25 ? c.name.substring(0,25)+'‚Ä¶' : c.name),
      datasets: [{
        label: 'CTR %',
        data: top10.map(c => c.ctr),
        backgroundColor: top10.map(c => c.ctr > 2 ? 'rgba(16,185,129,0.7)' : c.ctr > 1 ? 'rgba(59,130,246,0.7)' : 'rgba(239,68,68,0.6)'),
        borderRadius: 4
      }]
    },
    options: {
      ...chartDefaults,
      indexAxis: 'y',
      plugins: { ...chartDefaults.plugins, tooltip: { ...chartDefaults.plugins.tooltip, callbacks: { label: ctx => ' CTR: ' + pct(ctx.raw) } } },
      scales: {
        x: { ...chartDefaults.scales.x, ticks: { ...chartDefaults.scales.x.ticks, callback: v => v.toFixed(1)+'%' } },
        y: { ...chartDefaults.scales.y, ticks: { ...chartDefaults.scales.y.ticks, font: { size: 10, family: 'Inter' } } }
      }
    }
  });

  // Ads grid
  const grid = document.getElementById('adsGrid');
  grid.innerHTML = metaAds.map(ad => {
    const perfBadge = ad.ctr > 2 ? '<span class="badge badge-green">üèÜ Top</span>' :
                      ad.ctr > 1 ? '<span class="badge badge-blue">‚úÖ Bueno</span>' :
                      '<span class="badge badge-yellow">‚ö†Ô∏è Bajo</span>';
    const thumb = ad.thumbnail_url ?
      `<img src="${ad.thumbnail_url}" class="ad-thumb" onerror="this.style.display='none';this.nextElementSibling.style.display='flex'" loading="lazy"><div class="ad-thumb-placeholder" style="display:none">üé¨</div>` :
      `<div class="ad-thumb-placeholder">üé¨</div>`;
    return `<div class="ad-card">
      ${thumb}
      <div class="ad-body">
        <div class="ad-name">${ad.name}</div>
        <div class="ad-metrics">
          <div class="ad-metric">Spend: <span>${clp(ad.spend)}</span></div>
          <div class="ad-metric">CTR: <span>${pct(ad.ctr)}</span></div>
          <div class="ad-metric">CPC: <span>${clp(ad.cpc)}</span></div>
          <div class="ad-metric">Impr.: <span>${num(ad.impressions)}</span></div>
        </div>
      </div>
      <div class="ad-footer">${perfBadge}<span style="font-size:11px;color:var(--text-muted)">${ad.status}</span></div>
    </div>`;
  }).join('');
}

// ===== UPDATE SHOPIFY =====
function updateShopify() {
  const orders = getFilteredOrders();
  const revenue = orders.reduce((s,o) => s+o.total, 0);
  const ordersCount = orders.length;
  const aov = ordersCount > 0 ? revenue/ordersCount : 0;
  const maxOrder = orders.length > 0 ? Math.max(...orders.map(o=>o.total)) : 0;
  const newCust = orders.filter(o=>o.is_new).length;
  const pctReturning = ordersCount > 0 ? ((ordersCount-newCust)/ordersCount*100) : 0;

  document.getElementById('sh-revenue').textContent = clp(revenue);
  document.getElementById('sh-orders').textContent = num(ordersCount);
  document.getElementById('sh-aov').textContent = clp(aov);
  document.getElementById('sh-max').textContent = clp(maxOrder);
  document.getElementById('sh-new').textContent = num(newCust);
  document.getElementById('sh-returning').textContent = pctReturning.toFixed(1) + '%';

  // Monthly revenue chart
  createOrUpdate('chartMonthlyRevenue', {
    type: 'bar',
    data: {
      labels: monthlyStats.map(m => m.month),
      datasets: [
        {
          label: 'Revenue',
          data: monthlyStats.map(m => m.revenue),
          backgroundColor: 'rgba(59,130,246,0.7)',
          borderRadius: 4,
          yAxisID: 'y'
        },
        {
          label: '√ìrdenes',
          data: monthlyStats.map(m => m.orders),
          borderColor: '#10B981',
          backgroundColor: 'transparent',
          borderWidth: 2,
          type: 'line',
          tension: 0.3,
          pointRadius: 5,
          yAxisID: 'y2'
        }
      ]
    },
    options: {
      ...chartDefaults,
      plugins: { ...chartDefaults.plugins, tooltip: { ...chartDefaults.plugins.tooltip, callbacks: { label: ctx => ctx.datasetIndex === 0 ? ' Revenue: '+clp(ctx.raw) : ' √ìrdenes: '+num(ctx.raw) } } },
      scales: {
        x: chartDefaults.scales.x,
        y: { ...chartDefaults.scales.y, position: 'left', ticks: { ...chartDefaults.scales.y.ticks, callback: v => clp(v) } },
        y2: { ...chartDefaults.scales.y, position: 'right', grid: { display: false }, ticks: { ...chartDefaults.scales.y.ticks, callback: v => num(v) } }
      }
    }
  });

  // Customers chart
  createOrUpdate('chartShopifyCustomers', {
    type: 'bar',
    data: {
      labels: monthlyStats.map(m => m.month),
      datasets: [
        { label: 'Nuevos', data: monthlyStats.map(m=>m.new_customers), backgroundColor: 'rgba(16,185,129,0.7)', borderRadius: 4 },
        { label: 'Recurrentes', data: monthlyStats.map(m=>m.returning_customers), backgroundColor: 'rgba(59,130,246,0.7)', borderRadius: 4 }
      ]
    },
    options: { ...chartDefaults }
  });

  // Products table
  const tbody = document.getElementById('productsBody');
  const maxRev = topProducts[0] ? topProducts[0].revenue : 1;
  tbody.innerHTML = topProducts.map((p,i) => `<tr>
    <td style="color:var(--text-muted);font-weight:400">${i+1}</td>
    <td style="max-width:300px">${p.name}</td>
    <td style="color:var(--green)">${clp(p.revenue)}</td>
    <td>${num(p.units)}</td>
    <td>${p.pct}%</td>
    <td>
      <div class="progress-wrap"><div class="progress-bar" style="width:${(p.revenue/maxRev*100).toFixed(1)}%"></div></div>
    </td>
  </tr>`).join('');

  // Recent orders
  const recent = [...shopifyOrders].slice(0,20);
  const ordersBody = document.getElementById('ordersBody');
  ordersBody.innerHTML = recent.map(o => {
    const statusMap = { 'paid': 'badge-green', 'partially_paid': 'badge-yellow', 'pending': 'badge-gray', 'refunded': 'badge-red', 'voided': 'badge-red' };
    const statusBadge = statusMap[o.financial_status] || 'badge-gray';
    const dateStr = o.created_at ? o.created_at.substring(0,10) : '‚Äî';
    const typeLabel = o.is_new ? '<span class="badge badge-blue">Nuevo</span>' : '<span class="badge badge-purple">Recurrente</span>';
    return `<tr>
      <td style="color:var(--text-muted)">${dateStr}</td>
      <td>#${String(o.id).slice(-6)}</td>
      <td>${o.customer}</td>
      <td style="color:var(--text-primary);font-weight:500">${clp(o.total)}</td>
      <td><span class="badge ${statusBadge}">${o.financial_status}</span></td>
      <td>${typeLabel}</td>
    </tr>`;
  }).join('');
}

// ===== UPDATE GA4 =====
function updateGA4() {
  const totalSessions = ga4Channels.reduce((s,c) => s+c.sessions, 0);
  const totalRevenue = ga4Channels.reduce((s,c) => s+c.revenue, 0);
  const maxRev = Math.max(...ga4Channels.map(c=>c.revenue));
  const maxSessions = Math.max(...ga4Channels.map(c=>c.sessions));
  const maxConvRate = Math.max(...ga4Channels.map(c => c.sessions > 0 ? c.conversions/c.sessions : 0));

  const tbody = document.getElementById('ga4Body');
  tbody.innerHTML = ga4Channels.map(c => {
    const convRate = c.sessions > 0 ? (c.conversions/c.sessions*100) : 0;
    const pctTraffic = totalSessions > 0 ? (c.sessions/totalSessions*100) : 0;
    const isMaxRev = c.revenue === maxRev;
    const isMaxSess = c.sessions === maxSessions;
    const isMaxConv = convRate === maxConvRate * 100 || (c.sessions > 0 && c.conversions/c.sessions === maxConvRate);
    return `<tr>
      <td style="font-weight:600">${c.channel}</td>
      <td class="${isMaxSess ? 'highlight-best' : ''}">${num(c.sessions)}</td>
      <td>${num(c.users)}</td>
      <td>${num(c.newUsers)}</td>
      <td>${num(c.conversions)}</td>
      <td class="${isMaxRev ? 'highlight-best' : ''}">${clp(c.revenue)}</td>
      <td class="${isMaxConv ? 'highlight-best' : ''}">${convRate.toFixed(2)}%</td>
      <td>${pctTraffic.toFixed(1)}%</td>
    </tr>`;
  }).join('');

  createOrUpdate('chartGA4Sessions', {
    type: 'bar',
    data: {
      labels: ga4Channels.map(c=>c.channel),
      datasets: [{
        label: 'Sesiones',
        data: ga4Channels.map(c=>c.sessions),
        backgroundColor: ['#3B82F6','#10B981','#8B5CF6','#F59E0B','#EF4444','#06B6D4','#F97316'],
        borderRadius: 4
      }]
    },
    options: {
      ...chartDefaults,
      plugins: { ...chartDefaults.plugins, legend: { display: false } }
    }
  });

  createOrUpdate('chartGA4Revenue', {
    type: 'bar',
    data: {
      labels: ga4Channels.map(c=>c.channel),
      datasets: [{
        label: 'Revenue CLP',
        data: ga4Channels.map(c=>c.revenue),
        backgroundColor: ga4Channels.map(c => c.revenue === maxRev ? 'rgba(16,185,129,0.8)' : 'rgba(59,130,246,0.6)'),
        borderRadius: 4
      }]
    },
    options: {
      ...chartDefaults,
      plugins: { ...chartDefaults.plugins, legend: { display: false }, tooltip: { ...chartDefaults.plugins.tooltip, callbacks: { label: ctx => ' ' + clp(ctx.raw) } } },
      scales: { x: chartDefaults.scales.x, y: { ...chartDefaults.scales.y, ticks: { ...chartDefaults.scales.y.ticks, callback: v => clp(v) } } }
    }
  });
}

// ===== SET DATE RANGE =====
function setDateRange(start, end) {
  currentStartDate = start;
  currentEndDate = end;
  updateAll();
}

function setPreset(preset) {
  document.querySelectorAll('.pill').forEach(p => p.classList.remove('active'));
  document.querySelector(`.pill[data-preset="${preset}"]`)?.classList.add('active');

  const now = new Date('2026-02-23');
  if (preset === '7d') {
    const s = new Date(now); s.setDate(s.getDate()-6);
    setDateRange(s, now);
    fp.setDate([s, now]);
  } else if (preset === '30d') {
    const s = new Date(now); s.setDate(s.getDate()-29);
    setDateRange(s, now);
    fp.setDate([s, now]);
  } else if (preset === '90d') {
    const s = new Date(now); s.setDate(s.getDate()-89);
    setDateRange(s, now);
    fp.setDate([s, now]);
  } else if (preset === 'all') {
    currentStartDate = null;
    currentEndDate = null;
    updateAll();
    fp.clear();
  } else if (preset === 'custom') {
    fp.open();
  }
}

// ===== FULL UPDATE =====
function updateAll() {
  updateOverview();
  updateMetaAds();
  updateShopify();
  updateGA4();
}

function refreshDashboard() {
  const btn = document.querySelector('.btn-refresh');
  btn.textContent = '‚Üª Actualizando‚Ä¶';
  setTimeout(() => { updateAll(); btn.textContent = '‚Üª Actualizar'; }, 500);
}

// ===== NAVIGATION =====
const pageNames = { overview: 'Overview', metaads: 'Meta Ads', shopify: 'Shopify', ga4: 'Audiencias GA4', config: 'Configuraci√≥n' };

function showPage(pageId) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  const page = document.getElementById('page-' + pageId);
  if (page) page.classList.add('active');
  document.querySelector(`.nav-item[data-page="${pageId}"]`)?.classList.add('active');
  document.getElementById('breadcrumbText').textContent = pageNames[pageId] || pageId;
  // Re-render charts for newly visible page
  setTimeout(updateAll, 50);
}

document.querySelectorAll('.nav-item').forEach(item => {
  item.addEventListener('click', () => {
    showPage(item.dataset.page);
    // Close mobile sidebar
    document.getElementById('sidebar').classList.remove('mobile-open');
    document.getElementById('sidebarOverlay').classList.remove('visible');
  });
});

// ===== MOBILE SIDEBAR =====
document.getElementById('hamburgerBtn').addEventListener('click', () => {
  document.getElementById('sidebar').classList.toggle('mobile-open');
  document.getElementById('sidebarOverlay').classList.toggle('visible');
});
document.getElementById('sidebarOverlay').addEventListener('click', () => {
  document.getElementById('sidebar').classList.remove('mobile-open');
  document.getElementById('sidebarOverlay').classList.remove('visible');
});

// ===== DATE PICKER (flatpickr) =====
let fp;
document.addEventListener('DOMContentLoaded', () => {
  fp = flatpickr('#dateRangePicker', {
    mode: 'range',
    dateFormat: 'd/m/Y',
    theme: 'dark',
    disableMobile: false,
    onChange: function(selectedDates) {
      if (selectedDates.length === 2) {
        document.querySelectorAll('.pill').forEach(p => p.classList.remove('active'));
        document.querySelector('.pill[data-preset="custom"]').classList.add('active');
        setDateRange(selectedDates[0], selectedDates[1]);
      }
    }
  });

  // Preset buttons
  document.querySelectorAll('.pill').forEach(btn => {
    btn.addEventListener('click', () => setPreset(btn.dataset.preset));
  });

  // Init with 30D
  setPreset('30d');
});

// ===== CAMPAIGNS TABLE SORT =====
document.querySelectorAll('th[data-sort]').forEach(th => {
  th.addEventListener('click', () => {
    const key = th.dataset.sort;
    const isDesc = th.classList.contains('desc');
    document.querySelectorAll('th[data-sort]').forEach(t => { t.classList.remove('asc','desc'); });
    th.classList.add(isDesc ? 'asc' : 'desc');
    const sorted = [...metaCampaigns].sort((a,b) => isDesc ? a[key]-b[key] : b[key]-a[key]);
    const tbody = document.getElementById('campaignsBody');
    tbody.innerHTML = sorted.map(c => {
      const objBadge = { 'OUTCOME_SALES': 'badge-blue', 'OUTCOME_LEADS': 'badge-purple', 'OUTCOME_ENGAGEMENT': 'badge-orange' }[c.objective] || 'badge-gray';
      const objLabel = { 'OUTCOME_SALES': 'Ventas', 'OUTCOME_LEADS': 'Leads', 'OUTCOME_ENGAGEMENT': 'Engagement' }[c.objective] || c.objective;
      const statusBadge = c.status === 'ACTIVE' ? 'badge-green' : 'badge-gray';
      const roasColor = c.roas >= 3 ? 'color:var(--green)' : c.roas >= 1 ? 'color:var(--yellow)' : c.roas > 0 ? 'color:var(--red)' : 'color:var(--text-muted)';
      return `<tr>
        <td style="max-width:260px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap">${c.name}</td>
        <td><span class="badge ${objBadge}">${objLabel}</span></td>
        <td>${clp(c.spend)}</td>
        <td>${num(c.impressions)}</td>
        <td>${num(c.clicks)}</td>
        <td>${pct(c.ctr)}</td>
        <td>${clp(c.cpc)}</td>
        <td style="${roasColor}">${c.roas > 0 ? roas(c.roas) : '‚Äî'}</td>
        <td><span class="badge ${statusBadge}">${c.status}</span></td>
      </tr>`;
    }).join('');
  });
});
</script>
</body>
</html>