<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Kyest BI ‚Äî Analytics Report</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:#0C1117;color:#E6EDF3;display:flex;min-height:100vh}
.sidebar{width:220px;background:#161B22;border-right:1px solid #30363D;position:fixed;top:0;left:0;height:100vh;display:flex;flex-direction:column;padding:0;overflow-y:auto;z-index:100}
.sidebar-logo{padding:20px 16px 16px;border-bottom:1px solid #30363D}
.sidebar-logo a{color:#E6EDF3;text-decoration:none;font-size:15px;font-weight:700;display:flex;align-items:center;gap:8px}
.sidebar-logo span{font-size:20px}
.sidebar nav{padding:12px 0;flex:1}
.sidebar nav a{display:flex;align-items:center;gap:10px;padding:10px 16px;color:#8B949E;text-decoration:none;font-size:14px;transition:all .15s;border-left:2px solid transparent}
.sidebar nav a:hover,.sidebar nav a.active{color:#E6EDF3;background:#1C2333;border-left-color:#3478F6}
.sidebar nav a .icon{font-size:16px;width:20px;text-align:center}
.main{margin-left:220px;flex:1;padding:32px;min-width:0}
.page-header{margin-bottom:28px}
.page-header h1{font-size:24px;font-weight:700;color:#E6EDF3;margin-bottom:4px}
.page-header p{color:#8B949E;font-size:14px}
.kpi-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:16px;margin-bottom:28px}
.kpi-card{background:#161B22;border:1px solid #30363D;border-radius:10px;padding:20px}
.kpi-card .label{color:#8B949E;font-size:12px;text-transform:uppercase;letter-spacing:.5px;margin-bottom:8px}
.kpi-card .value{color:#E6EDF3;font-size:22px;font-weight:700;margin-bottom:4px}
.kpi-card .sub{color:#8B949E;font-size:12px}
.kpi-card.blue{border-top:3px solid #3478F6}
.kpi-card.green{border-top:3px solid #238636}
.kpi-card.teal{border-top:3px solid #0D9488}
.kpi-card.yellow{border-top:3px solid #D29922}
.kpi-card.red{border-top:3px solid #DA3633}
.chart-card{background:#161B22;border:1px solid #30363D;border-radius:10px;padding:24px;margin-bottom:24px}
.chart-card h3{font-size:15px;font-weight:600;margin-bottom:16px;color:#E6EDF3}
.chart-wrap{position:relative;height:280px}
.tabs{display:flex;border-bottom:1px solid #30363D;margin-bottom:24px;flex-wrap:wrap}
.tab-btn{padding:10px 20px;background:none;border:none;color:#8B949E;font-size:14px;cursor:pointer;border-bottom:2px solid transparent;margin-bottom:-1px;transition:all .15s}
.tab-btn:hover{color:#E6EDF3}
.tab-btn.active{color:#3478F6;border-bottom-color:#3478F6}
.tab-panel{display:none}
.tab-panel.active{display:block}
.table-wrap{background:#161B22;border:1px solid #30363D;border-radius:10px;overflow:hidden;margin-bottom:24px}
table{width:100%;border-collapse:collapse;font-size:13px}
thead th{background:#1C2333;color:#8B949E;font-weight:600;text-transform:uppercase;font-size:11px;letter-spacing:.5px;padding:11px 14px;text-align:left;cursor:pointer;user-select:none}
thead th:hover{color:#E6EDF3}
thead th.sort-asc::after{content:" ‚Üë"}
thead th.sort-desc::after{content:" ‚Üì"}
tbody tr{border-top:1px solid #30363D;transition:background .1s}
tbody tr:hover{background:#1C2333}
tbody td{padding:10px 14px;color:#E6EDF3}
.progress-bar{height:6px;background:#1C2333;border-radius:3px;overflow:hidden;margin-top:4px}
.progress-bar-fill{height:100%;background:#3478F6;border-radius:3px}
.two-col{display:grid;grid-template-columns:1fr 1fr;gap:20px}
.insight-card{background:#161B22;border:1px solid #30363D;border-radius:10px;padding:20px;margin-bottom:16px}
.insight-card h4{font-size:14px;font-weight:600;margin-bottom:12px;display:flex;align-items:center;gap:8px}
.insight-card h4.green{color:#238636}
.insight-card h4.yellow{color:#D29922}
.insight-card h4.red{color:#DA3633}
.insight-card h4.blue{color:#3478F6}
.insight-card ul{list-style:none;padding:0}
.insight-card ul li{color:#8B949E;font-size:13px;padding:6px 0;border-bottom:1px solid #1C2333;display:flex;justify-content:space-between;gap:12px}
.insight-card ul li:last-child{border-bottom:none}
.insight-card ul li span{color:#E6EDF3;font-weight:600}
.device-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;margin-bottom:24px}
.device-card{background:#161B22;border:1px solid #30363D;border-radius:10px;padding:20px;text-align:center}
.device-card .icon{font-size:32px;margin-bottom:8px}
.device-card .name{color:#8B949E;font-size:12px;text-transform:uppercase;letter-spacing:.5px;margin-bottom:4px}
.device-card .val{font-size:28px;font-weight:700;color:#E6EDF3}
.device-card .share{color:#3478F6;font-size:14px;margin-top:4px}
footer{margin-top:40px;padding-top:20px;border-top:1px solid #30363D;color:#8B949E;font-size:12px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:8px}
footer a{color:#3478F6;text-decoration:none}
@media(max-width:768px){.sidebar{display:none}.main{margin-left:0}.two-col{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="sidebar">
  <div class="sidebar-logo">
    <a href="https://aictmopenclaw-a11y.github.io/kyest-dashboard/">
      <span>‚ö°</span> Kyest BI
    </a>
  </div>
  <nav>
    <a href="#" class="active tab-link" data-tab="overview"><span class="icon">üìä</span> Overview</a>
    <a href="#" class="tab-link" data-tab="canales"><span class="icon">üì°</span> Canales</a>
    <a href="#" class="tab-link" data-tab="dispositivos"><span class="icon">üì±</span> Dispositivos</a>
    <a href="#" class="tab-link" data-tab="insights"><span class="icon">üí°</span> Insights</a>
  </nav>
</div>
<div class="main">
  <div class="page-header">
    <h1>üìà Google Analytics 4 ‚Äî Reporte de Tr√°fico</h1>
    <p>An√°lisis de sesiones, canales y conversiones ¬∑ Datos al 25/02/2026 11:05</p>
  </div>

  <div class="tabs">
    <button class="tab-btn active" data-tab="overview">Overview</button>
    <button class="tab-btn" data-tab="canales">Canales</button>
    <button class="tab-btn" data-tab="dispositivos">Dispositivos</button>
    <button class="tab-btn" data-tab="insights">Insights</button>
  </div>

  <!-- OVERVIEW -->
  <div class="tab-panel active" id="tab-overview">
    <div class="kpi-grid">
      <div class="kpi-card blue">
        <div class="label">Sesiones Totales</div>
        <div class="value">0</div>
        <div class="sub">visitas al sitio</div>
      </div>
      <div class="kpi-card teal">
        <div class="label">Usuarios</div>
        <div class="value">0</div>
        <div class="sub">0 nuevos</div>
      </div>
      <div class="kpi-card green">
        <div class="label">Conversiones</div>
        <div class="value">0</div>
        <div class="sub">Tasa: 0.00%</div>
      </div>
      <div class="kpi-card yellow">
        <div class="label">Tasa de Rebote</div>
        <div class="value">0.0%</div>
        <div class="sub">promedio</div>
      </div>
      <div class="kpi-card red">
        <div class="label">Ingresos GA4</div>
        <div class="value">$0</div>
        <div class="sub">reportados en GA4</div>
      </div>
    </div>
    <div class="chart-card">
      <h3>üìÖ Tendencia Mensual de Sesiones y Usuarios</h3>
      <div class="chart-wrap"><canvas id="monthlyChart"></canvas></div>
    </div>
    <div class="chart-card">
      <h3>üéØ Conversiones Mensuales</h3>
      <div class="chart-wrap" style="height:200px"><canvas id="convChart"></canvas></div>
    </div>
    <div class="kpi-grid">
      <div class="kpi-card blue">
        <div class="label">Usuarios Nuevos</div>
        <div class="value">0</div>
        <div class="sub">0.0% del total</div>
      </div>
      <div class="kpi-card teal">
        <div class="label">Usuarios Recurrentes</div>
        <div class="value">0</div>
        <div class="sub">0.0% del total</div>
      </div>
      <div class="kpi-card green">
        <div class="label">Ingresos GA4</div>
        <div class="value">$0</div>
        <div class="sub">reportados en GA4</div>
      </div>
      <div class="kpi-card yellow">
        <div class="label">Tasa Conv. General</div>
        <div class="value">0.00%</div>
        <div class="sub">0 conv. / 0 sesiones</div>
      </div>
    </div>
    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>Mes</th>
            <th>Sesiones</th>
            <th>Usuarios</th>
            <th>Nuevos</th>
            <th>Conversiones</th>
            <th>Tasa Conv.</th>
            <th>Tasa Rebote</th>
            <th>Ingresos</th>
          </tr>
        </thead>
        <tbody id="monthlyTbody"></tbody>
      </table>
    </div>
  </div>

  <!-- CANALES -->
  <div class="tab-panel" id="tab-canales">
    <div class="two-col">
      <div class="chart-card">
        <h3>üì° Sesiones por Canal</h3>
        <div class="chart-wrap"><canvas id="channelSessionsChart"></canvas></div>
      </div>
      <div class="chart-card">
        <h3>üéØ Tasa de Conversi√≥n por Canal</h3>
        <div class="chart-wrap"><canvas id="channelConvChart"></canvas></div>
      </div>
    </div>
    <div class="chart-card">
      <h3>üìà Top 3 Canales ‚Äî Tendencia Mensual de Sesiones</h3>
      <div class="chart-wrap"><canvas id="channelTrendChart"></canvas></div>
    </div>
    <div class="chart-card">
      <h3>üí¨ Tasa de Engagement por Canal</h3>
      <div class="chart-wrap" style="height:220px"><canvas id="engagementChart"></canvas></div>
    </div>
    <h3 style="font-size:15px;font-weight:600;margin-bottom:16px;color:#E6EDF3">üìä Detalle por Canal</h3>
    <div id="channelCards" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;margin-bottom:24px"></div>
    <div class="chart-card">
      <h3>üìÖ Sesiones por Canal y Mes (Detalle Cruzado)</h3>
      <div class="table-wrap" style="margin-top:16px">
        <table id="crossTable">
          <thead id="crossHead"></thead>
          <tbody id="crossBody"></tbody>
        </table>
      </div>
    </div>
    <div class="table-wrap">
      <table id="channelsTable">
        <thead>
          <tr>
            <th onclick="sortCh(0)">Canal</th>
            <th onclick="sortCh(1)">Sesiones</th>
            <th onclick="sortCh(2)">Usuarios</th>
            <th onclick="sortCh(3)">Usuarios Nuevos</th>
            <th onclick="sortCh(4)">Conversiones</th>
            <th onclick="sortCh(5)">Tasa Conv.</th>
            <th onclick="sortCh(6)">Rebote</th>
            <th onclick="sortCh(7)">Ingresos</th>
          </tr>
        </thead>
        <tbody id="channelsTbody"></tbody>
      </table>
    </div>
  </div>

  <!-- MONTHLY DETAIL (extra panel in canales) -->

  <!-- DISPOSITIVOS POR CANAL extra tab -->
  <div class="tab-panel" id="tab-dispositivos_canal" style="display:none"></div>

  <!-- DISPOSITIVOS -->
  <div class="tab-panel" id="tab-dispositivos">
    <div class="device-grid" id="deviceCards"></div>
    <div class="two-col">
      <div class="chart-card">
        <h3>üì± Distribuci√≥n por Dispositivo (Sesiones)</h3>
        <div class="chart-wrap"><canvas id="devicePieChart"></canvas></div>
      </div>
      <div class="chart-card">
        <h3>üéØ Conversiones por Dispositivo</h3>
        <div class="chart-wrap"><canvas id="deviceConvChart"></canvas></div>
      </div>
    </div>
    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>Dispositivo</th>
            <th>Sesiones</th>
            <th>Usuarios</th>
            <th>Conversiones</th>
            <th>Tasa Conv.</th>
            <th>Participaci√≥n</th>
          </tr>
        </thead>
        <tbody id="deviceTbody"></tbody>
      </table>
    </div>
    <h3 style="font-size:15px;font-weight:600;margin:24px 0 16px;color:#E6EDF3">üìä Sesiones por Canal y Dispositivo</h3>
    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>Canal</th>
            <th>üì± M√≥vil</th>
            <th>üíª Escritorio</th>
            <th>üìí Tablet</th>
            <th>Total</th>
            <th>% M√≥vil</th>
          </tr>
        </thead>
        <tbody id="channelDeviceTbody"></tbody>
      </table>
    </div>
    <div class="chart-card" style="margin-top:16px">
      <h3>üìä Distribuci√≥n M√≥vil vs Escritorio por Canal</h3>
      <div class="chart-wrap" style="height:320px"><canvas id="channelDeviceChart"></canvas></div>
    </div>
  </div>

  <!-- MONTHLY TABLE TAB is embedded in canales section -->

  <!-- INSIGHTS -->
  <div class="tab-panel" id="tab-insights">
    <div class="insight-card">
      <h4 class="blue">üìä Resumen GA4 vs Shopify</h4>
      <ul>
        <li>Sesiones totales GA4 <span>0</span></li>
        <li>Usuarios √∫nicos GA4 <span>0</span></li>
        <li>Usuarios nuevos GA4 <span>0 (0.0%)</span></li>
        <li>Conversiones GA4 <span>0</span></li>
        <li>Tasa de conversi√≥n GA4 <span>0.00%</span></li>
        <li>Ingresos registrados en GA4 <span>$0</span></li>
        <li>Ingresos reales Shopify <span>Ver reporte Shopify para comparar</span></li>
        <li>Tasa de rebote promedio <span>0.0%</span></li>
        <li>Canal con mayor tr√°fico <span>N/A (0 sesiones)</span></li>
        <li>Canal con mayor tasa conv. <span>N/A</span></li>
      </ul>
    </div>
    <div class="insight-card">
      <h4 class="red">‚ö†Ô∏è Problemas de Atribuci√≥n y UTM</h4>
      <ul>
        <li>Sesiones Paid Social (Meta) <span>0</span></li>
        <li>Conversiones Paid Social <span>0</span></li>
        <li>Sesiones Directo <span>0 (posible falta de UTMs)</span></li>
        <li>Problema #1 <span>UTMs sin configurar en anuncios Meta ‚Üí tr√°fico aparece como Directo</span></li>
        <li>Problema #2 <span>GA4 puede no registrar todas las compras de Shopify si el pixel no est√° bien instalado</span></li>
        <li>Problema #3 <span>Ventana de atribuci√≥n de GA4 (30 d√≠as) vs Meta (7 d√≠as click / 1 d√≠a view)</span></li>
        <li>Acci√≥n inmediata <span>Verificar que el evento "purchase" de GA4 se dispara en la p√°gina de confirmaci√≥n de Shopify</span></li>
        <li>Objetivo UTMs <span>100% del tr√°fico Meta debe clasificar como "Paid Social" en GA4</span></li>
      </ul>
    </div>
    <div class="insight-card">
      <h4 class="yellow">üí° Oportunidades por Canal</h4>
      <ul>
        
      </ul>
    </div>
    <div class="insight-card">
      <h4 class="green">‚úÖ Recomendaciones CFO ‚Äî Plan de Acci√≥n</h4>
      <ul>
        <li>1. Auditor√≠a UTM (Semana 1) <span>Revisar todos los anuncios Meta y agregar utm_source=facebook&utm_medium=paid_social</span></li>
        <li>2. Pixel GA4 en Shopify (Semana 1) <span>Instalar integraci√≥n nativa GA4 de Shopify o via GTM con evento purchase</span></li>
        <li>3. Reducir tasa de rebote (Mes 1) <span>Meta: 0.0% de rebote ‚Äî Optimizar landing pages con CTA claro</span></li>
        <li>4. Invertir en SEO (Trimestre) <span>Canal org√°nico = tr√°fico sin costo. Objetivo: 30% del tr√°fico total org√°nico</span></li>
        <li>5. Email marketing (Mes 1) <span>Activar flujos de email para clientes existentes ‚Äî mayor tasa de conversi√≥n que cualquier otro canal</span></li>
        <li>6. Experiencia mobile (Mes 2) <span>Mobile representa la mayor√≠a del tr√°fico ‚Äî asegurar velocidad < 3s en m√≥vil</span></li>
        <li>7. Dashboard unificado (Mes 2) <span>Crear reporte mensual que consolide Shopify + Meta + GA4 en un solo n√∫mero de ROAS real</span></li>
        <li>8. A/B testing (Trimestre) <span>Probar distintas landing pages para mejorar tasa de conversi√≥n de 0.00% a 2%+</span></li>
      </ul>
    </div>
    <div class="insight-card">
      <h4 class="blue">üîß Gu√≠a de Implementaci√≥n UTM</h4>
      <ul>
        <li>Formato est√°ndar <span>?utm_source=facebook&utm_medium=paid_social&utm_campaign={nombre_campa√±a}</span></li>
        <li>Par√°metro utm_source <span>facebook / instagram / google / email</span></li>
        <li>Par√°metro utm_medium <span>paid_social / cpc / email / organic</span></li>
        <li>Par√°metro utm_campaign <span>Nombre exacto de la campa√±a en Meta Ads</span></li>
        <li>Par√°metro utm_content <span>Nombre del anuncio espec√≠fico (para rastrear creatividades)</span></li>
        <li>Herramienta <span>Usar Google Campaign URL Builder: ga-dev-tools.google.com/campaign-url-builder/</span></li>
        <li>Validaci√≥n <span>Verificar en GA4 > Adquisici√≥n > Campa√±as que aparecen los UTMs dentro de 24-48h</span></li>
        <li>Impacto esperado <span>Tr√°fico "Directo" deber√≠a reducirse > 50% con UTMs correctos</span></li>
      </ul>
    </div>
    <div class="insight-card">
      <h4 class="teal" style="color:#0D9488">üìà Benchmarks de Industria (Servicios de Belleza/Salud)</h4>
      <ul>
        <li>Tasa de conversi√≥n promedio sector <span>1.5% ‚Äî 3.5%</span></li>
        <li>Tasa de rebote promedio sector <span>45% ‚Äî 65%</span></li>
        <li>Tasa rebote actual Kyest <span>0.0% ‚úÖ Bajo benchmark</span></li>
        <li>Tasa conversi√≥n actual Kyest <span>0.00% ‚ö†Ô∏è Bajo benchmark</span></li>
        <li>Sesiones para 5% conversi√≥n <span>0 sesiones necesarias</span></li>
        <li>Objetivo sesiones mensuales <span>0 ‚Üí Meta: 0 (+50%)</span></li>
      </ul>
    </div>
    <div class="insight-card">
      <h4 class="blue">üìö Glosario de M√©tricas GA4</h4>
      <ul>
        <li>Sesiones <span>Grupo de interacciones de un usuario en un per√≠odo de 30 minutos. Reinicia a medianoche o al cambiar de campa√±a.</span></li>
        <li>Usuarios <span>N√∫mero de visitantes √∫nicos identificados por un ID de dispositivo o cookie en el per√≠odo seleccionado.</span></li>
        <li>Usuarios Nuevos <span>Visitantes que acceden al sitio por primera vez en el per√≠odo. GA4 usa el evento "first_visit" para identificarlos.</span></li>
        <li>Conversiones <span>Eventos marcados como "conversi√≥n" en GA4. Pueden ser compras, leads, formularios, etc. Configurable en GA4 > Configuraci√≥n > Conversiones.</span></li>
        <li>Tasa de Conversi√≥n <span>Porcentaje de sesiones que resultan en una conversi√≥n. F√≥rmula: (Conversiones / Sesiones) √ó 100.</span></li>
        <li>Tasa de Rebote <span>En GA4, porcentaje de sesiones sin engagement (< 10 segundos, sin conversi√≥n, sin segunda p√°gina). Inverso del Engagement Rate.</span></li>
        <li>Engagement Rate <span>Porcentaje de sesiones con engagement. Una sesi√≥n engaged = m√°s de 10s, conversi√≥n, o 2+ p√°ginas vistas.</span></li>
        <li>Paid Social <span>Tr√°fico de redes sociales pagadas (Meta Ads, TikTok Ads, etc.). Requiere UTM: utm_medium=paid_social.</span></li>
        <li>Organic Search <span>Tr√°fico de b√∫squedas org√°nicas en Google, Bing, etc. No requiere pauta pagada.</span></li>
        <li>Direct <span>Visitantes que escriben la URL directamente, usan marcadores, o provienen de fuentes sin UTM.</span></li>
        <li>Referral <span>Tr√°fico de otros sitios web que enlazan al tuyo (backlinks, blogs, directorios).</span></li>
        <li>CPM (Costo por mil impresiones) <span>M√©trica de eficiencia de medios. √ötil para comparar el costo de alcance entre canales.</span></li>
        <li>ROAS (Return on Ad Spend) <span>Ingresos generados por cada peso invertido en publicidad. ROAS = Ingresos / Inversi√≥n.</span></li>
        <li>LTV (Lifetime Value) <span>Valor total que un cliente genera durante su relaci√≥n con la empresa. Mayor LTV justifica mayor CAC.</span></li>
        <li>CAC (Customer Acquisition Cost) <span>Costo promedio de adquirir un nuevo cliente. CAC = Inversi√≥n / Nuevos Clientes.</span></li>
      </ul>
    </div>
    <div class="insight-card">
      <h4 class="yellow">üîç Checklist de Calidad de Datos</h4>
      <ul>
        <li>‚úÖ Pixel GA4 instalado <span>Verificar en GA4 > Configuraci√≥n > Flujos de datos</span></li>
        <li>‚¨ú Evento "purchase" configurado <span>Debe dispararse en /checkout/thank_you con valor del pedido</span></li>
        <li>‚¨ú UTMs en todos los anuncios Meta <span>utm_source, utm_medium, utm_campaign obligatorios</span></li>
        <li>‚¨ú Filtro IP de oficina <span>Excluir tr√°fico interno para datos limpios</span></li>
        <li>‚¨ú Vinculaci√≥n Google Ads <span>Si se usa Google Ads, vincular cuenta para datos de costo</span></li>
        <li>‚¨ú Audiencias de remarketing <span>Crear audiencias en GA4 para remarketing en Google Ads y Meta</span></li>
        <li>‚¨ú Alertas de anomal√≠as <span>Configurar alertas en GA4 para ca√≠das de tr√°fico > 30%</span></li>
        <li>‚¨ú Reporte semanal automatizado <span>Programar env√≠o de reporte cada lunes 8:00 AM</span></li>
        <li>‚¨ú Objetivos de negocio <span>Definir KPIs trimestrales y trackear en este dashboard</span></li>
        <li>‚¨ú Test A/B landing pages <span>Usar Google Optimize o Shopify nativo para testear variantes</span></li>
      </ul>
    </div>
    <div class="insight-card">
      <h4 class="red">üéØ Objetivos KPI para Pr√≥ximo Trimestre</h4>
      <ul>
        <li>Sesiones mensuales objetivo <span>0 (+50% vs promedio actual 0)</span></li>
        <li>Tasa de conversi√≥n objetivo <span>2.0% (actual: 0.00%)</span></li>
        <li>Tasa de rebote objetivo <span>&lt;55% (actual: 0.0%)</span></li>
        <li>Nuevos usuarios mensuales objetivo <span>0 (+30%)</span></li>
        <li>Tr√°fico org√°nico objetivo <span>40% del total (invertir en SEO y contenido)</span></li>
        <li>ROAS real consolidado objetivo <span>3.5x (ver reporte Meta para ROAS actual)</span></li>
        <li>CAC objetivo <span>Reducir 15% via optimizaci√≥n de campa√±as y aumento de conversi√≥n</span></li>
        <li>Email marketing <span>Activar canal email para recuperar 0 usuarios que no convirtieron</span></li>
      </ul>
    </div>
    <div class="insight-card">
      <h4 class="green">üóìÔ∏è Plan de Seguimiento Mensual</h4>
      <ul>
        <li>Semana 1 (cada mes) <span>Revisar m√©tricas de tr√°fico: sesiones, usuarios, tasa de rebote por canal</span></li>
        <li>Semana 1 (cada mes) <span>Comparar gasto Meta vs ingresos Shopify ‚Üí calcular ROAS real</span></li>
        <li>Semana 2 (cada mes) <span>Analizar top 5 anuncios Meta: CTR, CPC, conversiones ‚Üí ajustar presupuesto</span></li>
        <li>Semana 3 (cada mes) <span>Revisar tasa de conversi√≥n por canal ‚Üí identificar oportunidades</span></li>
        <li>Semana 4 (cada mes) <span>Preparar reporte CFO: resumen ejecutivo, alertas, recomendaciones</span></li>
        <li>Inicio de trimestre <span>Revisar objetivos trimestrales vs resultados reales ‚Üí ajustar estrategia</span></li>
        <li>Acciones autom√°ticas <span>Este agente BI actualiza los reportes diariamente con datos frescos de las APIs</span></li>
      </ul>
    </div>
    <div class="insight-card">
      <h4 style="color:#9146FF">üî¨ An√°lisis Detallado de Tr√°fico por Canal</h4>
      <ul>
        
      </ul>
    </div>
  </div>

  <footer>
    <span>üïê √öltima actualizaci√≥n: 25/02/2026 11:05 ¬∑ Kyest BI Dashboard</span>
    <a href="https://aictmopenclaw-a11y.github.io/kyest-dashboard/">‚Üê Volver al Hub</a>
  </footer>
</div>

<script>
// ‚îÄ‚îÄ Data ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const MONTHLY_LABELS = [];
const MONTHLY_SESSIONS = [];
const MONTHLY_USERS = [];
const MONTHLY_CONV = [];
const CHANNEL_LABELS = [];
const CHANNEL_SESSIONS = [];
const CHANNEL_CONV = [];
const CHANNELS = [];
const DEVICES = [];
const DEVICE_LABELS = [];
const DEVICE_VALS = [];
const DEVICE_BG = [];
const DEVICE_CONV = [];
const MONTHLY_TABLE = [];
const TOP3_CHANNELS = [];
const TOP3_DATA = [];
const AVG_ENGAGEMENT = {};
const CHANNEL_DEVICE_DATA = {};
// Full raw data for completeness
const RAW_MONTHLY = [];
const RAW_CHANNELS = [];

// ‚îÄ‚îÄ Tabs ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
document.querySelectorAll('.tab-btn, .tab-link').forEach(btn => {
  btn.addEventListener('click', e => {
    e.preventDefault();
    const tab = btn.dataset.tab;
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.toggle('active', b.dataset.tab === tab));
    document.querySelectorAll('.tab-link').forEach(b => b.classList.toggle('active', b.dataset.tab === tab));
    document.querySelectorAll('.tab-panel').forEach(p => p.classList.toggle('active', p.id === 'tab-' + tab));
  });
});

// ‚îÄ‚îÄ Charts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const baseOpts = {
  responsive:true, maintainAspectRatio:false,
  plugins:{ legend:{ labels:{ color:'#8B949E' } } },
  scales:{ x:{ ticks:{ color:'#8B949E', maxRotation:45 }, grid:{ color:'#1C2333' } },
            y:{ ticks:{ color:'#8B949E' }, grid:{ color:'#1C2333' } } }
};

new Chart(document.getElementById('monthlyChart').getContext('2d'), {
  type:'bar',
  data:{ labels:MONTHLY_LABELS, datasets:[
    { label:'Sesiones', data:MONTHLY_SESSIONS, backgroundColor:'#3478F6', borderRadius:3 },
    { label:'Usuarios', data:MONTHLY_USERS, backgroundColor:'#0D9488', borderRadius:3 }
  ] },
  options:baseOpts
});

new Chart(document.getElementById('convChart').getContext('2d'), {
  type:'line',
  data:{ labels:MONTHLY_LABELS, datasets:[{ label:'Conversiones', data:MONTHLY_CONV, borderColor:'#238636', backgroundColor:'rgba(35,134,54,.15)', fill:true, tension:.3, pointRadius:4 }] },
  options:baseOpts
});

new Chart(document.getElementById('channelSessionsChart').getContext('2d'), {
  type:'bar',
  data:{ labels:CHANNEL_LABELS.map(l=>l.substring(0,20)), datasets:[{ label:'Sesiones', data:CHANNEL_SESSIONS, backgroundColor:'#3478F6', borderRadius:4 }] },
  options:{...baseOpts, indexAxis:'y'}
});

new Chart(document.getElementById('channelConvChart').getContext('2d'), {
  type:'bar',
  data:{ labels:CHANNEL_LABELS.map(l=>l.substring(0,20)), datasets:[{ label:'Tasa de Conversi√≥n %', data:CHANNEL_CONV, backgroundColor:'#238636', borderRadius:4 }] },
  options:{...baseOpts, indexAxis:'y'}
});

new Chart(document.getElementById('devicePieChart').getContext('2d'), {
  type:'doughnut',
  data:{ labels:DEVICE_LABELS, datasets:[{ data:DEVICE_VALS, backgroundColor:DEVICE_BG, borderWidth:0 }] },
  options:{ responsive:true, maintainAspectRatio:false, plugins:{ legend:{ labels:{ color:'#E6EDF3' } } } }
});

new Chart(document.getElementById('deviceConvChart').getContext('2d'), {
  type:'bar',
  data:{ labels:DEVICE_LABELS, datasets:[{ label:'Conversiones', data:DEVICE_CONV, backgroundColor:DEVICE_BG, borderRadius:6 }] },
  options:baseOpts
});

// Channel trend chart
const trendColors = ['#3478F6','#238636','#D29922','#DA3633','#0D9488'];
new Chart(document.getElementById('channelTrendChart').getContext('2d'), {
  type:'line',
  data:{ labels:MONTHLY_LABELS, datasets: TOP3_DATA.map((ch,i) => ({
    label: ch.channel, data: ch.data,
    borderColor: trendColors[i], backgroundColor: trendColors[i]+'22',
    fill: false, tension:.3, pointRadius:3
  })) },
  options:baseOpts
});

// Engagement chart
const engLabels = Object.keys(AVG_ENGAGEMENT);
const engVals = Object.values(AVG_ENGAGEMENT);
new Chart(document.getElementById('engagementChart').getContext('2d'), {
  type:'bar',
  data:{ labels:engLabels.map(l=>l.substring(0,18)), datasets:[{ label:'Tasa Engagement %', data:engVals, backgroundColor:'#0D9488', borderRadius:4 }] },
  options:baseOpts
});

// Monthly table
document.getElementById('monthlyTbody').innerHTML = MONTHLY_TABLE.map(m => `
  <tr>
    <td style="font-weight:600">${m.month}</td>
    <td>${m.sessions.toLocaleString()}</td>
    <td>${m.users.toLocaleString()}</td>
    <td style="color:#8B949E">${m.newUsers.toLocaleString()}</td>
    <td style="color:#238636;font-weight:600">${m.conversions}</td>
    <td>${m.convRate.toFixed(2)}%</td>
    <td style="color:${m.bounceRate>70?'#DA3633':m.bounceRate>50?'#D29922':'#238636'}">${m.bounceRate.toFixed(1)}%</td>
    <td>${m.revenue_fmt}</td>
  </tr>`).join('');

// ‚îÄ‚îÄ Channels table ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let chSort = {col:1, dir:-1};
function sortCh(col) {
  chSort.dir = chSort.col===col ? chSort.dir*-1 : -1;
  chSort.col = col;
  const th = document.querySelectorAll('#channelsTable thead th');
  th.forEach((t,i) => { t.classList.remove('sort-asc','sort-desc'); if(i===col) t.classList.add(chSort.dir===1?'sort-asc':'sort-desc'); });
  renderChannels();
}

function renderChannels() {
  const cols = ['channel','sessions','users','newUsers','conversions','convRate','bounceRate','revenue'];
  const sorted = [...CHANNELS].sort((a,b) => {
    const av = a[cols[chSort.col]] ?? 0; const bv = b[cols[chSort.col]] ?? 0;
    if(typeof av === 'number') return (av-bv)*chSort.dir;
    return String(av).localeCompare(String(bv))*chSort.dir;
  });
  const maxSess = Math.max(...sorted.map(c=>c.sessions));
  document.getElementById('channelsTbody').innerHTML = sorted.map(c => `
    <tr>
      <td style="font-weight:600">${c.channel}</td>
      <td>
        ${c.sessions.toLocaleString()}
        <div class="progress-bar"><div class="progress-bar-fill" style="width:${(c.sessions/maxSess*100).toFixed(0)}%"></div></div>
      </td>
      <td>${c.users.toLocaleString()}</td>
      <td>${c.newUsers.toLocaleString()}</td>
      <td style="color:#238636;font-weight:600">${c.conversions}</td>
      <td>${c.convRate.toFixed(2)}%</td>
      <td style="color:${c.bounceRate>70?'#DA3633':c.bounceRate>50?'#D29922':'#238636'}">${c.bounceRate.toFixed(1)}%</td>
      <td>${c.revenue_fmt}</td>
    </tr>`).join('');
}

// ‚îÄ‚îÄ Device cards ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const deviceIcons = {'M√≥vil':'üì±','Escritorio':'üíª','Tablet':'üìí'};
document.getElementById('deviceCards').innerHTML = DEVICES.map(d => `
  <div class="device-card">
    <div class="icon">${deviceIcons[d.label]||'üñ•Ô∏è'}</div>
    <div class="name">${d.label}</div>
    <div class="val">${d.sessions.toLocaleString()}</div>
    <div class="share">${d.share}% del tr√°fico</div>
  </div>`).join('');

document.getElementById('deviceTbody').innerHTML = DEVICES.map(d => `
  <tr>
    <td style="font-weight:600">${deviceIcons[d.label]||''} ${d.label}</td>
    <td>${d.sessions.toLocaleString()}</td>
    <td>${d.users.toLocaleString()}</td>
    <td style="color:#238636;font-weight:600">${d.conversions}</td>
    <td>${d.convRate.toFixed(2)}%</td>
    <td>
      ${d.share}%
      <div class="progress-bar"><div class="progress-bar-fill" style="width:${d.share}%"></div></div>
    </td>
  </tr>`).join('');

renderChannels();

// Cross table: channels x months
const allMonths = [...new Set(RAW_MONTHLY.map(r=>r.month))].sort();
const allChannels = [...new Set(RAW_MONTHLY.map(r=>r.channel))];
const crossMap = {};
RAW_MONTHLY.forEach(r => {
  if (!crossMap[r.channel]) crossMap[r.channel] = {};
  crossMap[r.channel][r.month] = (crossMap[r.channel][r.month]||0) + (r.sessions||0);
});
const monthLabelsShort = allMonths.map(m => {
  try { const d=new Date(m.substring(0,4)+'-'+m.substring(4,6)+'-01'); return d.toLocaleDateString('es-CL',{month:'short',year:'2-digit'}); } catch(e){ return m; }
});
document.getElementById('crossHead').innerHTML = `<tr><th>Canal</th>${monthLabelsShort.map(m=>`<th>${m}</th>`).join('')}<th>Total</th></tr>`;
const crossColors = ['#3478F6','#238636','#D29922','#DA3633','#0D9488','#9146FF','#8B949E','#F0883E','#58A6FF','#3FB950'];
document.getElementById('crossBody').innerHTML = allChannels.map((ch,i) => {
  const vals = allMonths.map(m => crossMap[ch]?.[m]||0);
  const total = vals.reduce((a,b)=>a+b,0);
  const maxV = Math.max(...vals.filter(v=>v>0),1);
  return `<tr>
    <td style="font-weight:600;color:${crossColors[i%crossColors.length]}">${ch}</td>
    ${vals.map(v => `<td style="color:${v>0?'#E6EDF3':'#444C56'};background:rgba(${v/maxV*0.3},0,0,0)">
      ${v>0?v.toLocaleString():'‚Äî'}</td>`).join('')}
    <td style="font-weight:700;color:#E6EDF3">${total.toLocaleString()}</td>
  </tr>`;
}).join('') + `<tr style="border-top:2px solid #30363D">
  <td style="font-weight:700;color:#8B949E">TOTAL</td>
  ${allMonths.map(m => {
    const t = allChannels.reduce((s,ch)=>s+(crossMap[ch]?.[m]||0),0);
    return `<td style="font-weight:700;color:#E6EDF3">${t.toLocaleString()}</td>`;
  }).join('')}
  <td style="font-weight:700;color:#3478F6">${allChannels.reduce((s,ch)=>s+allMonths.reduce((ss,m)=>ss+(crossMap[ch]?.[m]||0),0),0).toLocaleString()}</td>
</tr>`;

// Channel-device breakdown table
const cdKeys = Object.keys(CHANNEL_DEVICE_DATA);
document.getElementById('channelDeviceTbody').innerHTML = cdKeys.map(ch => {
  const d = CHANNEL_DEVICE_DATA[ch]||{};
  const mob = d.mobile||0, desk = d.desktop||0, tab = d.tablet||0;
  const total = mob+desk+tab;
  const mobPct = total>0?(mob/total*100).toFixed(0):0;
  return `<tr>
    <td style="font-weight:600">${ch}</td>
    <td style="color:#3478F6">${mob.toLocaleString()}</td>
    <td style="color:#238636">${desk.toLocaleString()}</td>
    <td style="color:#D29922">${tab.toLocaleString()}</td>
    <td style="font-weight:600">${total.toLocaleString()}</td>
    <td>
      ${mobPct}%
      <div class="progress-bar"><div class="progress-bar-fill" style="width:${mobPct}%;background:#3478F6"></div></div>
    </td>
  </tr>`;
}).join('');

// Channel-device stacked chart
const cdLabels = cdKeys.map(k=>k.substring(0,15));
new Chart(document.getElementById('channelDeviceChart').getContext('2d'), {
  type:'bar',
  data:{ labels:cdLabels, datasets:[
    { label:'M√≥vil', data:cdKeys.map(k=>(CHANNEL_DEVICE_DATA[k]||{}).mobile||0), backgroundColor:'#3478F6', borderRadius:2 },
    { label:'Escritorio', data:cdKeys.map(k=>(CHANNEL_DEVICE_DATA[k]||{}).desktop||0), backgroundColor:'#238636', borderRadius:2 },
    { label:'Tablet', data:cdKeys.map(k=>(CHANNEL_DEVICE_DATA[k]||{}).tablet||0), backgroundColor:'#D29922', borderRadius:2 },
  ] },
  options:{...baseOpts, scales:{ x:{...baseOpts.scales.x, stacked:true}, y:{...baseOpts.scales.y, stacked:true} }}
});

// Per-channel cards
const chColors = {'Paid Social':'#3478F6','Organic Search':'#238636','Direct':'#8B949E','Organic Social':'#0D9488','Email':'#D29922','Referral':'#DA3633','Paid Search':'#9146FF','Unassigned':'#444C56'};
const maxChSess = Math.max(...CHANNELS.map(c=>c.sessions));
document.getElementById('channelCards').innerHTML = CHANNELS.map(ch => {
  const color = chColors[ch.channel] || '#3478F6';
  const pct = (ch.sessions/maxChSess*100).toFixed(0);
  const mobile = (CHANNEL_DEVICE_DATA[ch.channel]||{}).mobile||0;
  const desktop = (CHANNEL_DEVICE_DATA[ch.channel]||{}).desktop||0;
  const engagePct = AVG_ENGAGEMENT[ch.channel]||0;
  return `<div style="background:#161B22;border:1px solid #30363D;border-top:3px solid ${color};border-radius:10px;padding:16px">
    <div style="font-weight:600;font-size:14px;margin-bottom:12px;color:#E6EDF3">${ch.channel}</div>
    <div style="font-size:12px;color:#8B949E;margin-bottom:6px">Sesiones</div>
    <div style="font-size:22px;font-weight:700;color:#E6EDF3;margin-bottom:8px">${ch.sessions.toLocaleString()}</div>
    <div style="height:4px;background:#1C2333;border-radius:2px;margin-bottom:12px">
      <div style="height:100%;width:${pct}%;background:${color};border-radius:2px"></div>
    </div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;font-size:12px">
      <div><span style="color:#8B949E">Usuarios</span><br><strong>${ch.users.toLocaleString()}</strong></div>
      <div><span style="color:#8B949E">Conversiones</span><br><strong style="color:#238636">${ch.conversions}</strong></div>
      <div><span style="color:#8B949E">Tasa Conv.</span><br><strong>${ch.convRate.toFixed(2)}%</strong></div>
      <div><span style="color:#8B949E">Tasa Rebote</span><br><strong style="color:${ch.bounceRate>70?'#DA3633':ch.bounceRate>50?'#D29922':'#238636'}">${ch.bounceRate.toFixed(1)}%</strong></div>
      <div><span style="color:#8B949E">M√≥vil</span><br><strong>${mobile.toLocaleString()}</strong></div>
      <div><span style="color:#8B949E">Escritorio</span><br><strong>${desktop.toLocaleString()}</strong></div>
      <div><span style="color:#8B949E">Engagement</span><br><strong style="color:#0D9488">${engagePct.toFixed(1)}%</strong></div>
      <div><span style="color:#8B949E">Ingresos</span><br><strong>${ch.revenue_fmt}</strong></div>
    </div>
  </div>`;
}).join('');
</script>
</body>
</html>